<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Hibernate基本查询" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/17/Hibernate基本查询/" class="article-date">
  <time datetime="2017-03-17T07:10:41.000Z" itemprop="datePublished">2017-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java框架/">Java框架</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/17/Hibernate基本查询/">Hibernate基本查询</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Hibernate基本查询"><a href="#Hibernate基本查询" class="headerlink" title="Hibernate基本查询"></a>Hibernate基本查询</h1><p>Query接口</p>
<p>Query是Hibernate专门用来执行HQL语句的查询接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Query query = session.createQuery(<span class="string">"HQL语句"</span>);</div><div class="line">query.setParameter(...);</div><div class="line">List resultList = query.list();</div></pre></td></tr></table></figure>
<p>HQL基本查询</p>
<p>Hibernate Query Language（HQL）：官方推荐的查询语言，具有以下功能</p>
<ul>
<li>条件查询</li>
<li>支持投影查询</li>
<li>分页查询</li>
<li>连接查询</li>
<li>分组查询</li>
<li>子查询</li>
<li>内置了一些聚集函数</li>
<li>支持动态绑定参数</li>
</ul>
<h2 id="查询实体类的所有实例对象"><a href="#查询实体类的所有实例对象" class="headerlink" title="查询实体类的所有实例对象"></a>查询实体类的所有实例对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 查询所有的</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select1</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">         	<span class="comment">//默认为升序，desc为倒叙</span></div><div class="line">		String hql=<span class="string">"select stu from Student as stu order by stu.id asc"</span>;</div><div class="line">		</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">		<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">			System.out.println(stu);</div><div class="line">		&#125;</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="查询唯一的一条记录"><a href="#查询唯一的一条记录" class="headerlink" title="查询唯一的一条记录"></a>查询唯一的一条记录</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *查询一个实例对象</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select2</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"from Student"</span>;</div><div class="line">		Student stu=(Student)session.createQuery(hql).setMaxResults(<span class="number">1</span>).uniqueResult();</div><div class="line">		System.out.println(stu);</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="HQL的投影查询"><a href="#HQL的投影查询" class="headerlink" title="HQL的投影查询"></a>HQL的投影查询</h2><p>投影查询：即查询类的某几个属性，通过用select语句只选择类的部分属性来实现的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *HQL的投影查询</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select3</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"select a.stuName,a.age from Student a"</span>;</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		List&lt;Object[]&gt; list=query.list();</div><div class="line">		<span class="keyword">for</span>(Object objs[]:list)&#123;</div><div class="line">			<span class="keyword">for</span>(Object obj:objs)&#123;</div><div class="line">				System.out.println(obj);</div><div class="line">			&#125;</div><div class="line">			System.out.println(<span class="string">"*/****极客学院*******"</span>);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="实例化投影查询，需要类的对应的有参构造函数"><a href="#实例化投影查询，需要类的对应的有参构造函数" class="headerlink" title="实例化投影查询，需要类的对应的有参构造函数"></a>实例化投影查询，需要类的对应的有参构造函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String stuName,<span class="keyword">int</span> age)</span></span>&#123;</div><div class="line">	<span class="keyword">this</span>.stuName=stuName;</div><div class="line">	<span class="keyword">this</span>.age=age;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *实例化投影查询结果</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select4</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"select new Student(a.stuName,a.age) from Student a"</span>;</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">		<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">			System.out.println(stu);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="where子句"><a href="#where子句" class="headerlink" title="where子句"></a>where子句</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *where子句</div><div class="line"> *在where子句中可以指定</div><div class="line">	.号</div><div class="line">	比较运算符：</div><div class="line">		=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt; 、is null 、is not null </div><div class="line">	范围运算符：</div><div class="line">		in (值1, 值2 …)  ： 等于列表中的某一个值</div><div class="line">		not in(值1, 值2 …)  ： 不等于列表中的任意一个值</div><div class="line">		between 值1 and 值2  ： 在值1到值2的范围内(包括值1和值2)</div><div class="line">		not between 值1 and 值2 ： 不在值1到值2的范围内</div><div class="line">	字符串模式匹配： like '字符串模式'</div><div class="line">		字符串模式中可用“%”代表任意长度的字符串，“_”代表任意单个字符。</div><div class="line">	逻辑运算： and (与)、 or (或)、not (非)</div><div class="line">	用于集合的运算符：is empty、is not empty</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select5</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"from Student a where a.id not between 1 and 5"</span>;</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">		<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">			System.out.println(stu);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="HQL函数"><a href="#HQL函数" class="headerlink" title="HQL函数"></a>HQL函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String stuName)</span></span>&#123;</div><div class="line">	<span class="keyword">this</span>.stuName=stuName;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">	 * HQL常见函数</div><div class="line">		1.字符串相关</div><div class="line">			upper(s) 、lower(s) 、</div><div class="line">			concat(s1, s2) 、substring(s,offset,length) 、 length(s)、</div><div class="line">			trim([[both|leading|trailing] char [from]] s)、locate(search, s, offset)</div><div class="line">		2.数字 </div><div class="line">			abs(n) 、sqrt(n)、mod(dividend, divisor)</div><div class="line">		3.集合</div><div class="line">			size(c)  返回集合中元素的个数</div><div class="line">		4.日期时间</div><div class="line">			current_date()、current_time()、current_timestamp() </div><div class="line">			返回数据库系统的日期、时间、时间戳</div><div class="line">			year(d)、month(d)、day(d)、hour(d)、minute(d)、second(d)</div><div class="line">			从指定的参数中提取相应的值</div><div class="line">	 */</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select6</span><span class="params">()</span></span>&#123;</div><div class="line">		Transaction tx=<span class="keyword">null</span>;</div><div class="line">		Session session=<span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">			session=HibernateUtils.getSession();</div><div class="line">			tx=session.beginTransaction();</div><div class="line">			String hql=<span class="string">"select new Student(upper(s.stuName))from Student s"</span>;</div><div class="line">			Query query=session.createQuery(hql);</div><div class="line">			List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">			<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">				System.out.println(stu);</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			tx.commit();</div><div class="line">		&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">			<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">				tx.rollback();</div><div class="line">			&#125;</div><div class="line">			he.printStackTrace();</div><div class="line">		&#125;<span class="keyword">finally</span>&#123;</div><div class="line">			HibernateUtils.closeSession(session);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h2 id="参数绑定-号的使用"><a href="#参数绑定-号的使用" class="headerlink" title="参数绑定?号的使用"></a>参数绑定?号的使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">	 * HQL 参数绑定?号的使用</div><div class="line">	 */</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select7</span><span class="params">()</span></span>&#123;</div><div class="line">		Transaction tx=<span class="keyword">null</span>;</div><div class="line">		Session session=<span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">			session=HibernateUtils.getSession();</div><div class="line">			tx=session.beginTransaction();</div><div class="line">			String hql=<span class="string">"from Student a where a.id=? and a.stuName=?"</span>;</div><div class="line">			</div><div class="line">			Query query=session.createQuery(hql);</div><div class="line">			query.setInteger(<span class="number">0</span>, <span class="number">3</span>);</div><div class="line">			query.setString(<span class="number">1</span>, <span class="string">"wangwu"</span>);</div><div class="line">			List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">			<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">				System.out.println(stu);</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			tx.commit();</div><div class="line">		&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">			<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">				tx.rollback();</div><div class="line">			&#125;</div><div class="line">			he.printStackTrace();</div><div class="line">		&#125;<span class="keyword">finally</span>&#123;</div><div class="line">			HibernateUtils.closeSession(session);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h2 id="HQL-参数名称绑定"><a href="#HQL-参数名称绑定" class="headerlink" title="HQL 参数名称绑定"></a>HQL 参数名称绑定</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * HQL 参数名称绑定</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select8</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		<span class="comment">//查询操作，首先要获取一个Query 接口实例对象</span></div><div class="line">		String hql=<span class="string">"from Student a where a.id=:id and a.stuName=:name"</span>;</div><div class="line">		</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		query.setInteger(<span class="string">"id"</span>, <span class="number">3</span>);</div><div class="line">		query.setString(<span class="string">"name"</span>, <span class="string">"wangwu"</span>);</div><div class="line">		List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">		<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">			System.out.println(stu);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="HQL-去掉重复记录"><a href="#HQL-去掉重复记录" class="headerlink" title="HQL 去掉重复记录"></a>HQL 去掉重复记录</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * HQL 去掉重复记录</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select9</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"select distinct s.age,s.stuName from Student s"</span>;</div><div class="line">		</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">	</div><div class="line">		List&lt;Object[]&gt; list=query.list();</div><div class="line">		<span class="keyword">for</span>(Object objs[]:list)&#123;</div><div class="line">				System.out.println(objs[<span class="number">0</span>]);</div><div class="line">				System.out.println(objs[<span class="number">1</span>]);</div><div class="line">			System.out.println(<span class="string">"*/******极客学院*****"</span>);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="HQL聚合函数"><a href="#HQL聚合函数" class="headerlink" title="HQL聚合函数"></a>HQL聚合函数</h2><ul>
<li>count() 统计符合条件的记录条数</li>
<li>avg() 求平均值</li>
<li>sum() 求和</li>
<li>max() 求最大值</li>
<li>min() 求最小值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * HQL 聚合函数的使用</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select10</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"select min(s.age) from Student s"</span>;</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">	</div><div class="line">		List list=query.list();</div><div class="line">		System.out.println(list.get(<span class="number">0</span>));</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * HQL 分组函数</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select11</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">         	<span class="comment">//group分组 having筛选</span></div><div class="line">		String hql=<span class="string">"select count(s.id),s.clazz from Student s group by s.clazz having avg(s.age)&gt;20"</span>;</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		List&lt;Object[]&gt; list=query.list();</div><div class="line">		<span class="keyword">for</span>(Object[]objs:list)&#123;</div><div class="line">			<span class="keyword">for</span>(Object obj:objs)&#123;</div><div class="line">				System.out.println(obj);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><ul>
<li>setFisrtResult(int firstResult)</li>
<li>setMaxResult(int maxResults)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">testPager</span><span class="params">()</span></span>&#123;</div><div class="line">     	<span class="comment">//第一页，每页有两个</span></div><div class="line">	select12(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 分页查询</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select12</span><span class="params">(<span class="keyword">int</span> pageNo,<span class="keyword">int</span> pageSize)</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"from Student"</span>;</div><div class="line">		Query query=session.createQuery(hql).setFirstResult((pageNo-<span class="number">1</span>)*pageSize).setMaxResults(pageSize);</div><div class="line">		List&lt;Student&gt; list=(List&lt;Student&gt;)query.list();</div><div class="line">		<span class="keyword">for</span>(Student stu:list)&#123;</div><div class="line">			System.out.println(stu);</div><div class="line">		&#125;</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="批量更新和删除"><a href="#批量更新和删除" class="headerlink" title="批量更新和删除"></a>批量更新和删除</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * HQL 更新或者删除</div><div class="line"> */</div><div class="line"><span class="comment">//@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">updateOrDelete</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		String hql=<span class="string">"update Account set password='123456' where id=:id"</span>;</div><div class="line">		Query query=session.createQuery(hql);</div><div class="line">		query.setInteger(<span class="string">"id"</span>, <span class="number">1</span>);</div><div class="line">		<span class="keyword">int</span> i=query.executeUpdate();</div><div class="line">		System.out.println(i);</div><div class="line">		<span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</div><div class="line">			System.out.println(<span class="string">"成功"</span>);</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			System.out.println(<span class="string">"失败"</span>);</div><div class="line">		&#125;</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Hibernate命名查询"><a href="#Hibernate命名查询" class="headerlink" title="Hibernate命名查询"></a>Hibernate命名查询</h2><p>Account.hbm.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 命名查询 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">query</span> <span class="attr">name</span>=<span class="string">"accountHql"</span>&gt;</span></div><div class="line">	&lt;![CDATA[from Account]]&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">query</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * HQL的命名查询方式</div><div class="line"> */</div><div class="line"><span class="meta">@Test</span></div><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">select13</span><span class="params">()</span></span>&#123;</div><div class="line">	Transaction tx=<span class="keyword">null</span>;</div><div class="line">	Session session=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span>&#123;</div><div class="line">		session=HibernateUtils.getSession();</div><div class="line">		tx=session.beginTransaction();</div><div class="line">		Query query=session.getNamedQuery(<span class="string">"accountHql"</span>);</div><div class="line">		List&lt;Account&gt; list=(List&lt;Account&gt;)query.list();</div><div class="line">		<span class="keyword">for</span>(Account ac:list)&#123;</div><div class="line">			System.out.println(ac);</div><div class="line">		&#125;</div><div class="line">		tx.commit();</div><div class="line">	&#125;<span class="keyword">catch</span>(HibernateException he)&#123;</div><div class="line">		<span class="keyword">if</span>(tx!=<span class="keyword">null</span>)&#123;</div><div class="line">			tx.rollback();</div><div class="line">		&#125;</div><div class="line">		he.printStackTrace();</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		HibernateUtils.closeSession(session);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h5 id="源码下载"><a href="#源码下载" class="headerlink" title="源码下载"></a><a href="https://github.com/LoydC/Practice_Java/tree/master/Hibernate-HQL" target="_blank" rel="external">源码下载</a></h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/17/Hibernate基本查询/" data-id="cj56omtut0004ro2fzuz5o8ts" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hibernate/">Hibernate</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSH/">SSH</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/查询/">查询</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java集合框架" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/17/Java集合框架/" class="article-date">
  <time datetime="2017-03-17T03:22:29.000Z" itemprop="datePublished">2017-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java基础/">Java基础</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/17/Java集合框架/">Java集合框架</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Java集合框架图"><a href="#Java集合框架图" class="headerlink" title="Java集合框架图"></a>Java集合框架图</h1><p> <img src="/media/Java集合框架/Java集合框架图.png" alt="Java集合框架图"></p>
<p>在集合框架图中，红色标记的为接口，蓝色标记的为重要的实现类</p>
<p>在Java集合中大致可分为四个体系：</p>
<ul>
<li>Set，代表无序、不可重复的集合</li>
<li>List，代表有序、重复的集合</li>
<li>Map，代表具有映射关系的集合</li>
<li>Queue，代表队列集合</li>
</ul>
<h1 id="Iterator接口"><a href="#Iterator接口" class="headerlink" title="Iterator接口"></a>Iterator接口</h1><blockquote>
<p>Iterable是Collection接口的父接口，因此Collection集合可以直接调用Iterable中的方法。</p>
<p>Iterator主要用于迭访问Collection集合中的元素，Iterator对象也被称为迭代器</p>
</blockquote>
<p>下面为Iterable接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function">Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span> </span>&#123;</div><div class="line">        Objects.requireNonNull(action);</div><div class="line">        <span class="keyword">for</span> (T t : <span class="keyword">this</span>) &#123;</div><div class="line">            action.accept(t);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> Spliterator&lt;T&gt; <span class="title">spliterator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Spliterators.spliteratorUnknownSize(iterator(), <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Iterable接口中：</p>
<ul>
<li><p>第一个方法就是返回T类型元素的一个迭代器。</p>
</li>
<li><p>下面的两个默认方法是Java 8新增的功能</p>
<ul>
<li><p>forEach方法所需的参数类型是一个函数式接口，可用Lambda表达式，用于对每个元素执行给定的动作指导</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionEach</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="comment">// 创建一个集合</span></div><div class="line">		Collection c = <span class="keyword">new</span> HashSet();</div><div class="line">		c.add(<span class="string">"Map"</span>);</div><div class="line">		c.add(<span class="string">"Set"</span>);</div><div class="line">		c.add(<span class="string">"Queue"</span>);</div><div class="line">     	c.add(<span class="string">"List"</span>);</div><div class="line">		<span class="comment">// 调用forEach()方法遍历集合</span></div><div class="line">		c.forEach(obj -&gt; System.out.println(<span class="string">"迭代集合元素："</span> + obj));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>spliterator方法实现从iterable的Iterator中创建一个早期绑定的spliterator</p>
</li>
</ul>
<p>Iterator接口隐藏了各种Collection实现类的底层细节，向应用程序提供了遍历Collection集合元素的统一编程接口，下面是Iterator接口的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="function">E <span class="title">next</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"remove"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEachRemaining</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> E&gt; action)</span> </span>&#123;</div><div class="line">        Objects.requireNonNull(action);</div><div class="line">        <span class="keyword">while</span> (hasNext())</div><div class="line">            action.accept(next());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如上面代码所示，Iterator定义了四个方法：</p>
<ul>
<li>hasNext方法，如果被迭代的集合元素还没有被遍历完，则返回true</li>
<li>next方法，返回集合里的下一个元素</li>
<li>remove方法，删除集合里上一次next方法返回的元素</li>
<li>forEachRemaining方法，Java 8 新增，可使用Lambda表达式遍历元素</li>
</ul>
<p><strong>注意</strong>：当使用Iterator迭代访问Collection集合元素时，Collection集合里的元素不能被改变，只有通过Iterator的remove()方法删除上一次next()方法返回的集合元素才可以；否则将会引发异常。</p>
<h1 id="Collection接口"><a href="#Collection接口" class="headerlink" title="Collection接口"></a>Collection接口</h1><p>Collection接口是Set、List和Queue接口的父接口，下面是Collection接口的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">Iterable</span>&lt;<span class="title">E</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;<span class="comment">//返回集合元素个数</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;<span class="comment">//返回集合是否为空</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object o)</span></span>;<span class="comment">//返回集合是否包含o</span></div><div class="line">    <span class="function">Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span></span>;<span class="comment">//返回对应的迭代器</span></div><div class="line">  	Object[] toArray();<span class="comment">//把集合转换成Object数组</span></div><div class="line">    &lt;T&gt; T[] toArray(T[] a);<span class="comment">//把集合转换成对应的数组 </span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span></span>;<span class="comment">//添加元素</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span></span>;<span class="comment">//删除元素</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">containsAll</span><span class="params">(Collection&lt;?&gt; c)</span></span>;<span class="comment">//是否包含c里面的所有元素</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span></span>;<span class="comment">//将c中元素全部添加到指定集合</span></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">removeAll</span><span class="params">(Collection&lt;?&gt; c)</span></span>;<span class="comment">//删除c中全部的元素</span></div><div class="line">  	<span class="comment">/*Java 8新增的方法，该方法将会批量删除符合filter条件的所有元素，该方法需要Predicate对象作为参数，同样也是函数式接口，可用Lambda表达式*/</span></div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">removeIf</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> E&gt; filter)</span> </span>&#123;</div><div class="line">        Objects.requireNonNull(filter);</div><div class="line">        <span class="keyword">boolean</span> removed = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">final</span> Iterator&lt;E&gt; each = iterator();</div><div class="line">        <span class="keyword">while</span> (each.hasNext()) &#123;</div><div class="line">            <span class="keyword">if</span> (filter.test(each.next())) &#123;</div><div class="line">                each.remove();</div><div class="line">                removed = <span class="keyword">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> removed;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">retainAll</span><span class="params">(Collection&lt;?&gt; c)</span></span>;<span class="comment">//从集合中删除集合c里不包含的元素</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;<span class="comment">//清空</span></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;<span class="comment">//返回hashCode值</span></div><div class="line">    <span class="function"><span class="keyword">default</span> Spliterator&lt;E&gt; <span class="title">spliterator</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Spliterators.spliterator(<span class="keyword">this</span>, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">  	<span class="comment">/*返回集合对应的流，可通过流式API操作集合元素*/</span></div><div class="line">    <span class="function"><span class="keyword">default</span> Stream&lt;E&gt; <span class="title">stream</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> StreamSupport.stream(spliterator(), <span class="keyword">false</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">default</span> Stream&lt;E&gt; <span class="title">parallelStream</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> StreamSupport.stream(spliterator(), <span class="keyword">true</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面程序示范使用Predicate来过滤集合。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PredicateTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		Collection c = <span class="keyword">new</span> HashSet();</div><div class="line">		c.add(<span class="keyword">new</span> String(<span class="string">"123456789101112"</span>));</div><div class="line">		c.add(<span class="keyword">new</span> String(<span class="string">"12345678"</span>));</div><div class="line">		c.add(<span class="keyword">new</span> String(<span class="string">"123456789"</span>));</div><div class="line">		c.add(<span class="keyword">new</span> String(<span class="string">"123456"</span>));</div><div class="line">		c.add(<span class="keyword">new</span> String(<span class="string">"112233445566"</span>));</div><div class="line">		<span class="comment">// 使用Lambda表达式（目标类型是Predicate）过滤集合</span></div><div class="line">		books.removeIf(ele -&gt; ((String)ele).length() &lt; <span class="number">10</span>);</div><div class="line">		System.out.println(books);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用Predicate可以充分简化集合的运算，假设有books集合，如果程序有如下三个统计需求：</p>
<ul>
<li>统计书名中出现“数据”字符串的图书数量</li>
<li>统计书名中出现“Java”字符串的图书数量</li>
<li>统计书名长度大于10的图书数量</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">import</span> java.util.function.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PredicateTest2</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="comment">// 创建books集合、为books集合添加元素的代码与前一个程序相同。</span></div><div class="line">		Collection books = <span class="keyword">new</span> HashSet();</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"轻量级Java EE企业应用实战"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"疯狂Java讲义"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"深入Java虚拟机"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"数据挖掘"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"数据结构与算法分析"</span>));</div><div class="line">		<span class="comment">// 统计书名包含“疯狂”子串的图书数量</span></div><div class="line">		System.out.println(calAll(books , ele-&gt;((String)ele).contains(<span class="string">"数据"</span>)));</div><div class="line">		<span class="comment">// 统计书名包含“Java”子串的图书数量</span></div><div class="line">		System.out.println(calAll(books , ele-&gt;((String)ele).contains(<span class="string">"Java"</span>)));</div><div class="line">		<span class="comment">// 统计书名字符串长度大于10的图书数量</span></div><div class="line">		System.out.println(calAll(books , ele-&gt;((String)ele).length() &gt; <span class="number">10</span>));</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calAll</span><span class="params">(Collection books , Predicate p)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> total = <span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span> (Object obj : books)</div><div class="line">		&#123;</div><div class="line">			<span class="comment">// 使用Predicate的test()方法判断该对象是否满足Predicate指定的条件</span></div><div class="line">			<span class="keyword">if</span> (p.test(obj))</div><div class="line">			&#123;</div><div class="line">				total ++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> total;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面的例子使用Stream来改写上一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="keyword">import</span> java.util.function.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionStream</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="comment">// 创建books集合、为books集合添加元素的代码与8.2.5小节的程序相同。</span></div><div class="line">		Collection books = <span class="keyword">new</span> HashSet();</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"轻量级Java EE企业应用实战"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"疯狂Java讲义"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"深入Java虚拟机"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"数据挖掘"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"数据结构与算法分析"</span>));</div><div class="line">		<span class="comment">// 统计书名包含“疯狂”子串的图书数量</span></div><div class="line">		System.out.println(books.stream()</div><div class="line">			.filter(ele-&gt;((String)ele).contains(<span class="string">"数据"</span>))</div><div class="line">			.count()); <span class="comment">// 输出4</span></div><div class="line">		<span class="comment">// 统计书名包含“Java”子串的图书数量</span></div><div class="line">		System.out.println(books.stream()</div><div class="line">			.filter(ele-&gt;((String)ele).contains(<span class="string">"Java"</span>) )</div><div class="line">			.count()); <span class="comment">// 输出2</span></div><div class="line">		<span class="comment">// 统计书名字符串长度大于10的图书数量</span></div><div class="line">		System.out.println(books.stream()</div><div class="line">			.filter(ele-&gt;((String)ele).length() &gt; <span class="number">10</span>)</div><div class="line">			.count()); <span class="comment">// 输出2</span></div><div class="line">		<span class="comment">// 先调用Collection对象的stream()方法将集合转换为Stream,</span></div><div class="line">		<span class="comment">// 再调用Stream的mapToInt()方法获取原有的Stream对应的IntStream</span></div><div class="line">		books.stream().mapToInt(ele -&gt; ((String)ele).length())</div><div class="line">			<span class="comment">// 调用forEach()方法遍历IntStream中每个元素</span></div><div class="line">			.forEach(System.out::println);<span class="comment">// 输出8  11  16  7  8</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h1><h2 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h2><p>HashSet具有以下特点：</p>
<ul>
<li>不能保证元素的排列顺序，顺序可能与添加顺序不同，顺序也可能发生变化</li>
<li>HashSet不是同步的，如果多个线程同时访问一个HashSet，假设有两个或两个以上线程同时修改了HashSet集合时，必须通过代码保证其同步</li>
<li>集合元素值可以是null</li>
</ul>
<p>hashCode()方法可以获得该对象的hashCode值，通过这个值决定该对象在HashCode中的存储位置。</p>
<p>equals()方法判断两个对象是否相等。</p>
<p>当把一个对象放入HashSet中时，如果需要重写该对象对应类的equals()方法，则也应该重写其hashCode()方法，规则是两个对象通过equals()方法比较返回true，这两个对象的hashCode值也相等。</p>
<p>重写hashCode方法的基本规则：</p>
<ul>
<li>在程序运行过程中，同一个对象多次调用hashCode()返回相同的值</li>
<li>当两个对象通过equals()方法返回true，这两个对象的hashCode值也应该相等</li>
<li>对象中用作equals()方法比较标准的实例变量，都应该用于计算hashCode值</li>
</ul>
<p>下面程序分别提供了三个类A、B和C，它们分别重写了equals()、和hashCode()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 类B的hashCode()方法总是返回1，但没有重写其equals()方法</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 类C的hashCode()方法总是返回2，且重写其equals()方法总是返回true</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSetTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		HashSet books = <span class="keyword">new</span> HashSet();</div><div class="line">		<span class="comment">// 分别向books集合中添加两个A对象，两个B对象，两个C对象</span></div><div class="line">		books.add(<span class="keyword">new</span> A());</div><div class="line">		books.add(<span class="keyword">new</span> A());</div><div class="line">		books.add(<span class="keyword">new</span> B());</div><div class="line">		books.add(<span class="keyword">new</span> B());</div><div class="line">		books.add(<span class="keyword">new</span> C());</div><div class="line">		books.add(<span class="keyword">new</span> C());</div><div class="line">		System.out.println(books);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出结果为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[B@<span class="number">1</span>,B@<span class="number">1</span>,C@<span class="number">2</span>,A@<span class="number">5483</span>cd,A@<span class="number">9931f</span>5]</div></pre></td></tr></table></figure>
<h2 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h2><p>LinkedHashSet同时使用链表维护元素的次序，这样使得元素看起来是以插入的顺序保存的</p>
<p>LinkedHashSet需要维护元素的插入顺序，因此性能略低于HashSet的性能，但在迭代器访问Set里面的全部元素时将有很好的性能，因为它以链表来维护内部顺序</p>
<p>输出LinkedHashSet集合的元素时，元素顺序总与添加顺序一致，并且依然不允许集合元素重复，如下面代码所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashSetTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		LinkedHashSet books = <span class="keyword">new</span> LinkedHashSet();</div><div class="line">		books.add(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		books.add(<span class="string">"数据结构与算法分析"</span>);</div><div class="line">		System.out.println(books);</div><div class="line">		<span class="comment">// 删除 疯狂Java讲义</span></div><div class="line">		books.remove(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		<span class="comment">// 重新添加 疯狂Java讲义</span></div><div class="line">		books.add(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		System.out.println(books);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[疯狂Java讲义,数据结构与算法分析]</div><div class="line">[数据结构与算法分析,疯狂Java讲义]</div></pre></td></tr></table></figure>
<h2 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h2><p>TreeSet可以确保集合元素处于排序状态。与HashSet集合相比，TreeSet还提供了几个额外的方法</p>
<ul>
<li>Comparator comparator()</li>
<li>Object first()</li>
<li>Object last()</li>
<li>Object lower(Object e)</li>
<li>Object higher(Object e)</li>
<li>SortedSet subSet(Object fromElement,Object toElement)</li>
<li>SortedSet headSet(Object toElement)</li>
<li>SortedSet tailSet(Object fromElement)</li>
</ul>
<p>因为TreeSet是有序的，所以增加了访问第一个、前一个、后一个、最后一个元素的方法，并提供了三个从TreeSet中截取子TreeSet的方法</p>
<p><strong>1.自然排序</strong></p>
<p>TreeSet会调用集合元素的compareTo(Object obj)方法来比较元素之间的大小关系，然后将集合元素按升序排列，这种方式就是自然排序</p>
<p>如果希望TreeSet能正常工作，TreeSet只能添加同一种类型的元素</p>
<p>如果两个对象compareTo(Object obj)方法比较相等，即返回0，则新对象将无法添加到TreeSet集合中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Z</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> age;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Z</span><span class="params">(<span class="keyword">int</span> age)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 重写equals()方法，总是返回true</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 重写了compareTo(Object obj)方法，总是返回1</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSetTest2</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		TreeSet set = <span class="keyword">new</span> TreeSet();</div><div class="line">		Z z1 = <span class="keyword">new</span> Z(<span class="number">6</span>);</div><div class="line">		set.add(z1);</div><div class="line">		<span class="comment">// 第二次添加同一个对象，输出true，表明添加成功</span></div><div class="line">		System.out.println(set.add(z1));    <span class="comment">//①</span></div><div class="line">		<span class="comment">// 下面输出set集合，将看到有两个元素</span></div><div class="line">		System.out.println(set);</div><div class="line">		<span class="comment">// 修改set集合的第一个元素的age变量</span></div><div class="line">		 ((Z)(set.first())).age = <span class="number">9</span>;</div><div class="line">		<span class="comment">// 输出set集合的最后一个元素的age变量，将看到也变成了9</span></div><div class="line">		System.out.println(((Z)(set.last())).age);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>重写该对象对应类的equals()方法时，若equals()返回true，应保证该方法与compareTo(Object o)方法有一致的结果，即返回0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"><span class="comment">/**</span></div><div class="line"> * Description:</div><div class="line"> * &lt;br/&gt;网站: &lt;a href="http://www.crazyit.org"&gt;疯狂Java联盟&lt;/a&gt;</div><div class="line"> * &lt;br/&gt;Copyright (C), 2001-2016, Yeeku.H.Lee</div><div class="line"> * &lt;br/&gt;This program is protected by copyright laws.</div><div class="line"> * &lt;br/&gt;Program Name:</div><div class="line"> * &lt;br/&gt;Date:</div><div class="line"> * <span class="doctag">@author</span> Yeeku.H.Lee kongyeeku@163.com</div><div class="line"> * <span class="doctag">@version</span> 1.0</div><div class="line"> */</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">R</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> count;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">R</span><span class="params">(<span class="keyword">int</span> count)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.count = count;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"R[count:"</span> + count + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 重写equals方法，根据count来判断是否相等</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == obj)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(obj != <span class="keyword">null</span> &amp;&amp; obj.getClass() == R.class)</div><div class="line">		&#123;</div><div class="line">			R r = (R)obj;</div><div class="line">			<span class="keyword">return</span> r.count == <span class="keyword">this</span>.count;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 重写compareTo方法，根据count来比较大小</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		R r = (R)obj;</div><div class="line">		<span class="keyword">return</span> count &gt; r.count ? <span class="number">1</span> :</div><div class="line">			count &lt; r.count ? -<span class="number">1</span> : <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSetTest3</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		TreeSet ts = <span class="keyword">new</span> TreeSet();</div><div class="line">		ts.add(<span class="keyword">new</span> R(<span class="number">5</span>));</div><div class="line">		ts.add(<span class="keyword">new</span> R(-<span class="number">3</span>));</div><div class="line">		ts.add(<span class="keyword">new</span> R(<span class="number">9</span>));</div><div class="line">		ts.add(<span class="keyword">new</span> R(-<span class="number">2</span>));</div><div class="line">		<span class="comment">// 打印TreeSet集合，集合元素是有序排列的</span></div><div class="line">		System.out.println(ts);    <span class="comment">// ①</span></div><div class="line">		<span class="comment">// 取出第一个元素</span></div><div class="line">		R first = (R)ts.first();</div><div class="line">		<span class="comment">// 对第一个元素的count赋值</span></div><div class="line">		first.count = <span class="number">20</span>;</div><div class="line">		<span class="comment">// 取出最后一个元素</span></div><div class="line">		R last = (R)ts.last();</div><div class="line">		<span class="comment">// 对最后一个元素的count赋值，与第二个元素的count相同</span></div><div class="line">		last.count = -<span class="number">2</span>;</div><div class="line">		<span class="comment">// 再次输出将看到TreeSet里的元素处于无序状态，且有重复元素</span></div><div class="line">		System.out.println(ts);   <span class="comment">// ②</span></div><div class="line">		<span class="comment">// 删除实例变量被改变的元素，删除失败</span></div><div class="line">		System.out.println(ts.remove(<span class="keyword">new</span> R(-<span class="number">2</span>)));   <span class="comment">// ③</span></div><div class="line">		System.out.println(ts);</div><div class="line">		<span class="comment">// 删除实例变量没有被改变的元素，删除成功</span></div><div class="line">		System.out.println(ts.remove(<span class="keyword">new</span> R(<span class="number">5</span>)));    <span class="comment">// ④</span></div><div class="line">		System.out.println(ts);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>为了让程序更加健壮，推荐不要修改放入HashSet和TreeSet集合中元素的实例变量</p>
<p><strong>2.定制排序</strong></p>
<p>Comparator接口包含了一个int compare(T o1,T o2)方法，用于比较o1等于o2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">M</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> age;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">M</span><span class="params">(<span class="keyword">int</span> age)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"M[age:"</span> + age + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSetTest4</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="comment">// 此处Lambda表达式的目标类型是Comparator</span></div><div class="line">		TreeSet ts = <span class="keyword">new</span> TreeSet((o1 , o2) -&gt;</div><div class="line">		&#123;</div><div class="line">			M m1 = (M)o1;</div><div class="line">			M m2 = (M)o2;</div><div class="line">			<span class="comment">// 根据M对象的age属性来决定大小，age越大，M对象反而越小</span></div><div class="line">			<span class="keyword">return</span> m1.age &gt; m2.age ? -<span class="number">1</span></div><div class="line">				: m1.age &lt; m2.age ? <span class="number">1</span> : <span class="number">0</span>;</div><div class="line">		&#125;);</div><div class="line">		ts.add(<span class="keyword">new</span> M(<span class="number">5</span>));</div><div class="line">		ts.add(<span class="keyword">new</span> M(-<span class="number">3</span>));</div><div class="line">		ts.add(<span class="keyword">new</span> M(<span class="number">9</span>));</div><div class="line">		System.out.println(ts);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[M [age:<span class="number">9</span>], M [age:<span class="number">5</span>], M [age:-<span class="number">3</span>]]</div></pre></td></tr></table></figure>
<h2 id="EnumSet"><a href="#EnumSet" class="headerlink" title="EnumSet"></a>EnumSet</h2><p>EnumSet是一个专门为枚举类设计的集合类，EnumSet中的所有元素都必须是指定枚举类型的枚举值，该枚举类型在创建时显示或隐式地指定。EnumSet也是有序的，EnumSet以枚举值在Enum类内的定义顺序来决定集合元素的顺序</p>
<p>EnumSet在内部以位向量的形式存储，这种存储形式非常紧凑高效，因此其占用内存很小，而且运行效率很好</p>
<p>EnumSet不允许加入null元素</p>
<p>EnumSet提供了如下的常用方法来创建EnumSet对：</p>
<ul>
<li>EnumSet allOf(Class elementType)</li>
<li>EnumSet complementOf(EnumSet s)</li>
<li>EnumSet copyOf(Collection s)</li>
<li>EnumSet copyOf(EnumSet s)</li>
<li>EnumSet noneOf(Class elementType)</li>
<li>EnumSet of(E first,E … rest)</li>
<li>EnumSet range(E from,E to)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">enum</span> Season</div><div class="line">&#123;</div><div class="line">	SPRING,SUMMER,FALL,WINTER</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumSetTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="comment">// 创建一个EnumSet集合，集合元素就是Season枚举类的全部枚举值</span></div><div class="line">		EnumSet es1 = EnumSet.allOf(Season.class);</div><div class="line">		System.out.println(es1); <span class="comment">// 输出[SPRING,SUMMER,FALL,WINTER]</span></div><div class="line">		<span class="comment">// 创建一个EnumSet空集合，指定其集合元素是Season类的枚举值。</span></div><div class="line">		EnumSet es2 = EnumSet.noneOf(Season.class);</div><div class="line">		System.out.println(es2); <span class="comment">// 输出[]</span></div><div class="line">		<span class="comment">// 手动添加两个元素</span></div><div class="line">		es2.add(Season.WINTER);</div><div class="line">		es2.add(Season.SPRING);</div><div class="line">		System.out.println(es2); <span class="comment">// 输出[SPRING,WINTER]</span></div><div class="line">		<span class="comment">// 以指定枚举值创建EnumSet集合</span></div><div class="line">		EnumSet es3 = EnumSet.of(Season.SUMMER , Season.WINTER);</div><div class="line">		System.out.println(es3); <span class="comment">// 输出[SUMMER,WINTER]</span></div><div class="line">		EnumSet es4 = EnumSet.range(Season.SUMMER , Season.WINTER);</div><div class="line">		System.out.println(es4); <span class="comment">// 输出[SUMMER,FALL,WINTER]</span></div><div class="line">		<span class="comment">// 新创建的EnumSet集合的元素和es4集合的元素有相同类型，</span></div><div class="line">		<span class="comment">// es5的集合元素 + es4集合元素 = Season枚举类的全部枚举值</span></div><div class="line">		EnumSet es5 = EnumSet.complementOf(es4);</div><div class="line">		System.out.println(es5); <span class="comment">// 输出[SPRING]</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当复制Collection集合中的所有元素来创建新的EnumSet集合时，要求Collection集合中的所有元素必须是同一个枚举类的枚举值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumSetTest2</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		Collection c = <span class="keyword">new</span> HashSet();</div><div class="line">		c.clear();</div><div class="line">		c.add(Season.FALL);</div><div class="line">		c.add(Season.SPRING);</div><div class="line">		<span class="comment">// 复制Collection集合中所有元素来创建EnumSet集合</span></div><div class="line">		EnumSet enumSet = EnumSet.copyOf(c);   <span class="comment">// ①</span></div><div class="line">		System.out.println(enumSet); <span class="comment">// 输出[SPRING,FALL]</span></div><div class="line">		c.add(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		c.add(<span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		<span class="comment">// 下面代码出现异常：因为c集合里的元素不是全部都为枚举值</span></div><div class="line">		enumSet = EnumSet.copyOf(c);  <span class="comment">// ②</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="各Set实现类的性能分析"><a href="#各Set实现类的性能分析" class="headerlink" title="各Set实现类的性能分析"></a>各Set实现类的性能分析</h2><p>1.HashSet的性能总是比TreeSet好，因为TreeSet需要额外的红黑树算法来维护集合元素的次序。只有需要一个保持排序的Set时，才使用TreeSet，否则使用HashSet</p>
<p>2.对于LinkedHashSet，对于普通的插入删除操作，它比HashSet略慢，这是由于维护链表所带来的额外开销造成的，但遍历LinkedHashSet会更快</p>
<p>3.EnumSet是所有Set实现类中性能最好的，但只能保存同一个枚举类的枚举值作为集合元素</p>
<h1 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h1><blockquote>
<p>List集合代表一个元素有序，可重复的集合，集合中每个元素都有其对应的顺序索引。List集合允许使用重复元素，可以通过索引来访问指定位置的集合元素。List集合默认按元素的添加顺序设置元素的索引，例如第一次添加的索引为0，第二次添加的元素索引为1……</p>
</blockquote>
<p>由于List是有序集合，因此List集合里增加了一些根据索引来操作集合元素的方法：</p>
<ul>
<li>void add(int index,Object element)</li>
<li>boolean addAll(int index,Collection c)</li>
<li>Object get(int index)</li>
<li>int indexOf(Object o)</li>
<li>int lastIndexIf(Object o)</li>
<li>Object remove(int index)</li>
<li>Object set(int index,Object element)</li>
<li>List subList(int fromIndex,int toIndex)</li>
<li>void replaceAll(UnaryOperator operator)</li>
<li>void sort(Comparator c)</li>
</ul>
<p>Java 8 为List集合增加了sort()和replaceAll()两个常用的默认方法</p>
<ul>
<li>sort()方法需要一个Comparator对象来控制元素排序</li>
<li>replaceAll()方法需要一个UnaryOperator来替换所有集合元素</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListTest3</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		List books = <span class="keyword">new</span> ArrayList();</div><div class="line">		<span class="comment">// 向books集合中添加4个元素</span></div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"轻量级Java EE企业应用实战"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"疯狂Java讲义"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"疯狂Android讲义"</span>));</div><div class="line">		books.add(<span class="keyword">new</span> String(<span class="string">"疯狂iOS讲义"</span>));</div><div class="line">		<span class="comment">// 使用目标类型为Comparator的Lambda表达式对List集合排序</span></div><div class="line">		books.sort((o1, o2)-&gt;((String)o1).length() - ((String)o2).length());</div><div class="line">		System.out.println(books);</div><div class="line">		<span class="comment">// 使用目标类型为UnaryOperator的Lambda表达式来替换集合中所有元素</span></div><div class="line">		<span class="comment">// 该Lambda表达式控制使用每个字符串的长度作为新的集合元素</span></div><div class="line">		books.replaceAll(ele-&gt;((String)ele).length());</div><div class="line">		System.out.println(books); <span class="comment">// 输出[7, 8, 11, 16]</span></div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>List还额外提供了一个listIterator()方法，该方法返回一个ListIterator对象，ListIterator接口继承了Iterator接口，并且增加了如下的方法：</p>
<ul>
<li>boolean hasPrevious()</li>
<li>Object previous()</li>
<li>void add(Object o)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIteratorTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		String[] books = &#123;</div><div class="line">			<span class="string">"疯狂Java讲义"</span>, <span class="string">"疯狂iOS讲义"</span>,</div><div class="line">			<span class="string">"轻量级Java EE企业应用实战"</span></div><div class="line">		&#125;;</div><div class="line">		List bookList = <span class="keyword">new</span> ArrayList();</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; books.length ; i++ )</div><div class="line">		&#123;</div><div class="line">			bookList.add(books[i]);</div><div class="line">		&#125;</div><div class="line">		ListIterator lit = bookList.listIterator();</div><div class="line">		<span class="keyword">while</span> (lit.hasNext())</div><div class="line">		&#123;</div><div class="line">			System.out.println(lit.next());</div><div class="line">			lit.add(<span class="string">"-------分隔符-------"</span>);</div><div class="line">		&#125;</div><div class="line">		System.out.println(<span class="string">"=======下面开始反向迭代======="</span>);</div><div class="line">		<span class="keyword">while</span>(lit.hasPrevious())</div><div class="line">		&#123;</div><div class="line">			System.out.println(lit.previous());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ArrayList和Vector实现类"><a href="#ArrayList和Vector实现类" class="headerlink" title="ArrayList和Vector实现类"></a>ArrayList和Vector实现类</h2><blockquote>
<p>ArrayList和Vector类都是基于数组实现的List类，所以都封装了一个动态的，允许再分配的Object[]数组，都使用initialCapacity参数来设置该数组的长度</p>
<p>当需要添加大量元素时，可使用ensureCapacity(int minCapacity)方法一次性增加initialCapacity</p>
<p>如不指定，则initialCapacity默认长度为10</p>
</blockquote>
<p>ArratList和Vector提供了如下两个方法来重新分配Object[]数组：</p>
<ul>
<li>void ensureCapacity(int minCapacity)</li>
<li>void trimToSize()</li>
</ul>
<p>ArrayList是线程不安全的，Vector是线程安全的，即使如此，也不推荐使用Vector，可用Collections工具类，使ArrayList变成线程安全的</p>
<p>Stack类继承Vector，同样不推荐使用，如需使用“栈”，可用ArrayDeque</p>
<h2 id="固定长度的List"><a href="#固定长度的List" class="headerlink" title="固定长度的List"></a>固定长度的List</h2><blockquote>
<p>Arrays，一个操作数组的工具类，提供了asList(Object… a)方法，可以把一个数组或指定个数的对象转换成一个List集合，这个List集合是Arrays内部类ArrayList的实例</p>
<p>Arrays.ArrayList是一个固定长度的List集合，程序只能遍历访问该集合里的元素，不可增加删除该集合里的元素</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedSizeList</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		List fixedList = Arrays.asList(<span class="string">"疯狂Java讲义"</span></div><div class="line">			, <span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		<span class="comment">// 获取fixedList的实现类，将输出Arrays$ArrayList</span></div><div class="line">		System.out.println(fixedList.getClass());</div><div class="line">		<span class="comment">// 使用方法引用遍历集合元素</span></div><div class="line">		fixedList.forEach(System.out::println);</div><div class="line">		<span class="comment">// 试图增加、删除元素都会引发UnsupportedOperationException异常</span></div><div class="line">		fixedList.add(<span class="string">"疯狂Android讲义"</span>);</div><div class="line">		fixedList.remove(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="LinkedList实现类"><a href="#LinkedList实现类" class="headerlink" title="LinkedList实现类"></a>LinkedList实现类</h2><blockquote>
<p>LinkedList类是List接口的实现类—这意味着它是一个List集合，可以根据索引来随机访问集合中的元素。除此之外，LinkedList还实现了Deque接口，可以被当成双端队列来使用，因此可以被当成“栈”和“队列”</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		LinkedList books = <span class="keyword">new</span> LinkedList();</div><div class="line">		<span class="comment">// 将字符串元素加入队列的尾部</span></div><div class="line">		books.offer(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		<span class="comment">// 将一个字符串元素加入栈的顶部</span></div><div class="line">		books.push(<span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		<span class="comment">// 将字符串元素添加到队列的头部（相当于栈的顶部）</span></div><div class="line">		books.offerFirst(<span class="string">"疯狂Android讲义"</span>);</div><div class="line">		<span class="comment">// 以List的方式（按索引访问的方式）来遍历集合元素</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; books.size() ; i++ )</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"遍历中："</span> + books.get(i));</div><div class="line">		&#125;</div><div class="line">		<span class="comment">// 访问、并不删除栈顶的元素</span></div><div class="line">		System.out.println(books.peekFirst());</div><div class="line">		<span class="comment">// 访问、并不删除队列的最后一个元素</span></div><div class="line">		System.out.println(books.peekLast());</div><div class="line">		<span class="comment">// 将栈顶的元素弹出“栈”</span></div><div class="line">		System.out.println(books.pop());</div><div class="line">		<span class="comment">// 下面输出将看到队列中第一个元素被删除</span></div><div class="line">		System.out.println(books);</div><div class="line">		<span class="comment">// 访问、并删除队列的最后一个元素</span></div><div class="line">		System.out.println(books.pollLast());</div><div class="line">		<span class="comment">// 下面输出：[轻量级Java EE企业应用实战]</span></div><div class="line">		System.out.println(books);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码示范了LinkedList作为List集合、双端队列、栈的用法</p>
<h1 id="Queue集合"><a href="#Queue集合" class="headerlink" title="Queue集合"></a>Queue集合</h1><blockquote>
<p>Queue集合，模拟“队列”先进先出，对头保存在队列中存放时间最长的元素，队列的尾部保存在队列中存放时间最短的元素。新元素插入到队列尾部，访问元素操作会返回队列头部的元素</p>
</blockquote>
<p>Queue定义了如下几个方法：</p>
<ul>
<li>void add(Object e) 加入队尾</li>
<li>Object element() 获取对头不删</li>
<li>boolean offer(Object e) 加入对尾，若队列有容量限制，则比add更快</li>
<li>Object peek() 获取对头不删</li>
<li>Object poll()  获取对头删</li>
<li>Object remove()  获取对头删</li>
</ul>
<h2 id="PriorityQueue实现类"><a href="#PriorityQueue实现类" class="headerlink" title="PriorityQueue实现类"></a>PriorityQueue实现类</h2><blockquote>
<p>PriorityQueue保存队列元素顺序并不是按加入队列的顺序，而是按队列元素的大小进行重新排序</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PriorityQueueTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		PriorityQueue pq = <span class="keyword">new</span> PriorityQueue();</div><div class="line">		<span class="comment">// 下面代码依次向pq中加入四个元素</span></div><div class="line">		pq.offer(<span class="number">6</span>);</div><div class="line">		pq.offer(-<span class="number">3</span>);</div><div class="line">		pq.offer(<span class="number">20</span>);</div><div class="line">		pq.offer(<span class="number">18</span>);</div><div class="line">		<span class="comment">// 输出pq队列，并不是按元素的加入顺序排列</span></div><div class="line">		System.out.println(pq); <span class="comment">// 输出[-3, 6, 20, 18]</span></div><div class="line">		<span class="comment">// 访问队列第一个元素，其实就是队列中最小的元素：-3</span></div><div class="line">		System.out.println(pq.poll());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>看到上面的程序并没有很好地按照大小进行排序是受到toString方法的影响</p>
<p>同样可以自然排序和定制排序</p>
<h2 id="Deque接口与ArrayDeque实现类"><a href="#Deque接口与ArrayDeque实现类" class="headerlink" title="Deque接口与ArrayDeque实现类"></a>Deque接口与ArrayDeque实现类</h2><p>Deque接口是Queue接口的子接口，代表双端队列，下面是常用的方法</p>
<ul>
<li>void addFirst(Object e)</li>
<li>void addLast(Object e)</li>
<li>Iterator descendingIterator()</li>
<li>Object getFirsr()</li>
<li>Object getLast()</li>
<li>boolean offerFirst(Object e)</li>
<li>boolean offerLast(Object e)</li>
<li>Object peekFirst()</li>
<li>Object peekLast()</li>
<li>Object pollFirst()</li>
<li>Object pollLast()</li>
<li>Object pop()</li>
<li>void push(Object e)</li>
<li>Object removeFirst()</li>
<li>Object removeFirstOccurrence(Object o)</li>
<li>Object removeLast()</li>
<li>Object removeLastOccurrence(Object o)</li>
</ul>
<p>下面程序把ArrayList当成“栈”来使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayDequeStack</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		ArrayDeque stack = <span class="keyword">new</span> ArrayDeque();</div><div class="line">		<span class="comment">// 依次将三个元素push入"栈"</span></div><div class="line">		stack.push(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		stack.push(<span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		stack.push(<span class="string">"疯狂Android讲义"</span>);</div><div class="line">		<span class="comment">// 输出：[疯狂Android讲义, 轻量级Java EE企业应用实战, 疯狂Java讲义]</span></div><div class="line">		System.out.println(stack);</div><div class="line">		<span class="comment">// 访问第一个元素，但并不将其pop出"栈"，输出：疯狂Android讲义</span></div><div class="line">		System.out.println(stack.peek());</div><div class="line">		<span class="comment">// 依然输出：[疯狂Android讲义, 疯狂Java讲义, 轻量级Java EE企业应用实战]</span></div><div class="line">		System.out.println(stack);</div><div class="line">		<span class="comment">// pop出第一个元素，输出：疯狂Android讲义</span></div><div class="line">		System.out.println(stack.pop());</div><div class="line">		<span class="comment">// 输出：[轻量级Java EE企业应用实战, 疯狂Java讲义]</span></div><div class="line">		System.out.println(stack);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面程序把ArrayList当成“队”来使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayDequeQueue</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		ArrayDeque queue = <span class="keyword">new</span> ArrayDeque();</div><div class="line">		<span class="comment">// 依次将三个元素加入队列</span></div><div class="line">		queue.offer(<span class="string">"疯狂Java讲义"</span>);</div><div class="line">		queue.offer(<span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		queue.offer(<span class="string">"疯狂Android讲义"</span>);</div><div class="line">		<span class="comment">// 输出：[疯狂Java讲义, 轻量级Java EE企业应用实战, 疯狂Android讲义]</span></div><div class="line">		System.out.println(queue);</div><div class="line">		<span class="comment">// 访问队列头部的元素，但并不将其poll出队列"栈"，输出：疯狂Java讲义</span></div><div class="line">		System.out.println(queue.peek());</div><div class="line">		<span class="comment">// 依然输出：[疯狂Java讲义, 轻量级Java EE企业应用实战, 疯狂Android讲义]</span></div><div class="line">		System.out.println(queue);</div><div class="line">		<span class="comment">// poll出第一个元素，输出：疯狂Java讲义</span></div><div class="line">		System.out.println(queue.poll());</div><div class="line">		<span class="comment">// 输出：[轻量级Java EE企业应用实战, 疯狂Android讲义]</span></div><div class="line">		System.out.println(queue);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="各种线性表的性能分析"><a href="#各种线性表的性能分析" class="headerlink" title="各种线性表的性能分析"></a>各种线性表的性能分析</h2><p>1.数组在随机访问时性能最好，链表在插入删除时有较好的性能</p>
<p>2.如果需要遍历List集合元素，对于ArrayList、Vector集合，应该使用随机访问方法(get)来遍历集合元素；对于LinkedList集合，则应采用Iterator迭代器来遍历集合</p>
<p>3.如果需要经常插入、删除操作，可使用LinkedList</p>
<p>4.可使用Collections将集合包装成线程安全的集合</p>
<h1 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h1><blockquote>
<p>Map用于保存具有映射关系的数据，因此Map集合里保存着两组值，一组值用于保存Map里的key，另外一组值用于保存Map里的value，key和value都可以是任何引用类型的数据，Map的key不可以重复</p>
</blockquote>
<ul>
<li>Map里的key集合Set集合里面的存储形式很像</li>
<li>Map里的value放在一起看，非常类似于一个List</li>
</ul>
<p>下面是Map集合的源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</div><div class="line">  </div><div class="line">  	<span class="function"><span class="keyword">boolean</span> <span class="title">containsKey</span><span class="params">(Object key)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function"><span class="keyword">boolean</span> <span class="title">containsValue</span><span class="params">(Object value)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function">V <span class="title">get</span><span class="params">(Object key)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function">V <span class="title">put</span><span class="params">(K key, V value)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function">V <span class="title">remove</span><span class="params">(Object key)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">putAll</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function">Set&lt;K&gt; <span class="title">keySet</span><span class="params">()</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function">Collection&lt;V&gt; <span class="title">values</span><span class="params">()</span></span>;</div><div class="line">    </div><div class="line">  	Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet();</div><div class="line">    </div><div class="line">  	<span class="class"><span class="keyword">interface</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</div><div class="line">        <span class="function">K <span class="title">getKey</span><span class="params">()</span></span>;</div><div class="line">        <span class="function">V <span class="title">getValue</span><span class="params">()</span></span>;</div><div class="line">        <span class="function">V <span class="title">setValue</span><span class="params">(V value)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>;</div><div class="line">        <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K extends Comparable&lt;? <span class="keyword">super</span> K&gt;, V&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByKey() &#123;</div><div class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</div><div class="line">                (c1, c2) -&gt; c1.getKey().compareTo(c2.getKey());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K, V extends Comparable&lt;? <span class="keyword">super</span> V&gt;&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByValue() &#123;</div><div class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</div><div class="line">                (c1, c2) -&gt; c1.getValue().compareTo(c2.getValue());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey(Comparator&lt;? <span class="keyword">super</span> K&gt; cmp) &#123;</div><div class="line">            Objects.requireNonNull(cmp);</div><div class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</div><div class="line">                (c1, c2) -&gt; cmp.compare(c1.getKey(), c2.getKey());</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue(Comparator&lt;? <span class="keyword">super</span> V&gt; cmp) &#123;</div><div class="line">            Objects.requireNonNull(cmp);</div><div class="line">            <span class="keyword">return</span> (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)</div><div class="line">                (c1, c2) -&gt; cmp.compare(c1.getValue(), c2.getValue());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">  	<span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</div><div class="line">    </div><div class="line">  	<span class="function"><span class="keyword">default</span> V <span class="title">getOrDefault</span><span class="params">(Object key, V defaultValue)</span> </span>&#123;</div><div class="line">        V v;</div><div class="line">        <span class="keyword">return</span> (((v = get(key)) != <span class="keyword">null</span>) || containsKey(key))</div><div class="line">            ? v</div><div class="line">            : defaultValue;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(BiConsumer&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V&gt; action)</span> </span>&#123;</div><div class="line">        Objects.requireNonNull(action);</div><div class="line">        <span class="keyword">for</span> (Map.Entry&lt;K, V&gt; entry : entrySet()) &#123;</div><div class="line">            K k;</div><div class="line">            V v;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                k = entry.getKey();</div><div class="line">                v = entry.getValue();</div><div class="line">            &#125; <span class="keyword">catch</span>(IllegalStateException ise) &#123;</div><div class="line">                <span class="comment">// this usually means the entry is no longer in the map.</span></div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException(ise);</div><div class="line">            &#125;</div><div class="line">            action.accept(k, v);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">replaceAll</span><span class="params">(BiFunction&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V, ? extends V&gt; function)</span> </span>&#123;</div><div class="line">        Objects.requireNonNull(function);</div><div class="line">        <span class="keyword">for</span> (Map.Entry&lt;K, V&gt; entry : entrySet()) &#123;</div><div class="line">            K k;</div><div class="line">            V v;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                k = entry.getKey();</div><div class="line">                v = entry.getValue();</div><div class="line">            &#125; <span class="keyword">catch</span>(IllegalStateException ise) &#123;</div><div class="line">                <span class="comment">// this usually means the entry is no longer in the map.</span></div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException(ise);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// ise thrown from function is not a cme.</span></div><div class="line">            v = function.apply(k, v);</div><div class="line"></div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                entry.setValue(v);</div><div class="line">            &#125; <span class="keyword">catch</span>(IllegalStateException ise) &#123;</div><div class="line">                <span class="comment">// this usually means the entry is no longer in the map.</span></div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException(ise);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">putIfAbsent</span><span class="params">(K key, V value)</span> </span>&#123;</div><div class="line">        V v = get(key);</div><div class="line">        <span class="keyword">if</span> (v == <span class="keyword">null</span>) &#123;</div><div class="line">            v = put(key, value);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> v;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object key, Object value)</span> </span>&#123;</div><div class="line">        Object curValue = get(key);</div><div class="line">        <span class="keyword">if</span> (!Objects.equals(curValue, value) ||</div><div class="line">            (curValue == <span class="keyword">null</span> &amp;&amp; !containsKey(key))) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        remove(key);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">replace</span><span class="params">(K key, V oldValue, V newValue)</span> </span>&#123;</div><div class="line">        Object curValue = get(key);</div><div class="line">        <span class="keyword">if</span> (!Objects.equals(curValue, oldValue) ||</div><div class="line">            (curValue == <span class="keyword">null</span> &amp;&amp; !containsKey(key))) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        put(key, newValue);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">replace</span><span class="params">(K key, V value)</span> </span>&#123;</div><div class="line">        V curValue;</div><div class="line">        <span class="keyword">if</span> (((curValue = get(key)) != <span class="keyword">null</span>) || containsKey(key)) &#123;</div><div class="line">            curValue = put(key, value);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> curValue;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">computeIfAbsent</span><span class="params">(K key,</span></span></div><div class="line">            Function&lt;? <span class="keyword">super</span> K, ? extends V&gt; mappingFunction) &#123;</div><div class="line">        Objects.requireNonNull(mappingFunction);</div><div class="line">        V v;</div><div class="line">        <span class="keyword">if</span> ((v = get(key)) == <span class="keyword">null</span>) &#123;</div><div class="line">            V newValue;</div><div class="line">            <span class="keyword">if</span> ((newValue = mappingFunction.apply(key)) != <span class="keyword">null</span>) &#123;</div><div class="line">                put(key, newValue);</div><div class="line">                <span class="keyword">return</span> newValue;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> v;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">computeIfPresent</span><span class="params">(K key,</span></span></div><div class="line">            BiFunction&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V, ? extends V&gt; remappingFunction) &#123;</div><div class="line">        Objects.requireNonNull(remappingFunction);</div><div class="line">        V oldValue;</div><div class="line">        <span class="keyword">if</span> ((oldValue = get(key)) != <span class="keyword">null</span>) &#123;</div><div class="line">            V newValue = remappingFunction.apply(key, oldValue);</div><div class="line">            <span class="keyword">if</span> (newValue != <span class="keyword">null</span>) &#123;</div><div class="line">                put(key, newValue);</div><div class="line">                <span class="keyword">return</span> newValue;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                remove(key);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="function"><span class="keyword">default</span> V <span class="title">compute</span><span class="params">(K key,</span></span></div><div class="line">            BiFunction&lt;? <span class="keyword">super</span> K, ? <span class="keyword">super</span> V, ? extends V&gt; remappingFunction) &#123;</div><div class="line">        Objects.requireNonNull(remappingFunction);</div><div class="line">        V oldValue = get(key);</div><div class="line"></div><div class="line">        V newValue = remappingFunction.apply(key, oldValue);</div><div class="line">        <span class="keyword">if</span> (newValue == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="comment">// delete mapping</span></div><div class="line">            <span class="keyword">if</span> (oldValue != <span class="keyword">null</span> || containsKey(key)) &#123;</div><div class="line">                <span class="comment">// something to remove</span></div><div class="line">                remove(key);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// nothing to do. Leave things as they were.</span></div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// add or replace old mapping</span></div><div class="line">            put(key, newValue);</div><div class="line">            <span class="keyword">return</span> newValue;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"> 	 <span class="function"><span class="keyword">default</span> V <span class="title">merge</span><span class="params">(K key, V value,</span></span></div><div class="line">            BiFunction&lt;? <span class="keyword">super</span> V, ? <span class="keyword">super</span> V, ? extends V&gt; remappingFunction) &#123;</div><div class="line">        Objects.requireNonNull(remappingFunction);</div><div class="line">        Objects.requireNonNull(value);</div><div class="line">        V oldValue = get(key);</div><div class="line">        V newValue = (oldValue == <span class="keyword">null</span>) ? value :</div><div class="line">                   remappingFunction.apply(oldValue, value);</div><div class="line">        <span class="keyword">if</span>(newValue == <span class="keyword">null</span>) &#123;</div><div class="line">            remove(key);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            put(key, newValue);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> newValue;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Map中包括一个内部类Entry，该类封装了一个key-value对，Entry包括如下方法：</p>
<ul>
<li>Object getKey()</li>
<li>Object getValue()</li>
<li>Object setValue(V value)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		Map map = <span class="keyword">new</span> HashMap();</div><div class="line">		<span class="comment">// 成对放入多个key-value对</span></div><div class="line">		map.put(<span class="string">"疯狂Java讲义"</span> , <span class="number">109</span>);</div><div class="line">		map.put(<span class="string">"疯狂iOS讲义"</span> , <span class="number">10</span>);</div><div class="line">		map.put(<span class="string">"疯狂Ajax讲义"</span> , <span class="number">79</span>);</div><div class="line">		<span class="comment">// 多次放入的key-value对中value可以重复</span></div><div class="line">		map.put(<span class="string">"轻量级Java EE企业应用实战"</span> , <span class="number">99</span>);</div><div class="line">		<span class="comment">// 放入重复的key时，新的value会覆盖原有的value</span></div><div class="line">		<span class="comment">// 如果新的value覆盖了原有的value，该方法返回被覆盖的value</span></div><div class="line">		System.out.println(map.put(<span class="string">"疯狂iOS讲义"</span> , <span class="number">99</span>)); <span class="comment">// 输出10</span></div><div class="line">		System.out.println(map); <span class="comment">// 输出的Map集合包含4个key-value对</span></div><div class="line">		<span class="comment">// 判断是否包含指定key</span></div><div class="line">		System.out.println(<span class="string">"是否包含值为 疯狂iOS讲义 key："</span></div><div class="line">			+ map.containsKey(<span class="string">"疯狂iOS讲义"</span>)); <span class="comment">// 输出true</span></div><div class="line">		<span class="comment">// 判断是否包含指定value</span></div><div class="line">		System.out.println(<span class="string">"是否包含值为 99 value："</span></div><div class="line">			+ map.containsValue(<span class="number">99</span>)); <span class="comment">// 输出true</span></div><div class="line">		<span class="comment">// 获取Map集合的所有key组成的集合，通过遍历key来实现遍历所有key-value对</span></div><div class="line">		<span class="keyword">for</span> (Object key : map.keySet() )</div><div class="line">		&#123;</div><div class="line">			<span class="comment">// map.get(key)方法获取指定key对应的value</span></div><div class="line">			System.out.println(key + <span class="string">"--&gt;"</span> + map.get(key));</div><div class="line">		&#125;</div><div class="line">		map.remove(<span class="string">"疯狂Ajax讲义"</span>); <span class="comment">// 根据key来删除key-value对。</span></div><div class="line">		System.out.println(map); <span class="comment">// 输出结果不再包含 疯狂Ajax讲义=79 的key-value对</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Java-8-为Map新增的方法"><a href="#Java-8-为Map新增的方法" class="headerlink" title="Java 8 为Map新增的方法"></a>Java 8 为Map新增的方法</h2><p>Java 8 除了为Map增加了remove(Object key，Object value)默认方法之外，还增加了如下方法：</p>
<ul>
<li>Object compute(Object key,BiFunction remappingFunction)</li>
<li>Object computeIfAnsent(Object key,Function mappingFunction)</li>
<li>Object computeIfPresent(Object key,BiFunction remappingFunction)</li>
<li>void forEach(Biconsumer action)</li>
<li>Object getOrDefault(Object key,V defaultValue)</li>
<li>Object merge(Object key,Object value,BiFunction remapingFunction)</li>
<li>Object putIfAbsent(Object key,Object value)</li>
<li>Object replace(Object key,Object value)</li>
<li>replaceAll(BiFunction remappingFunction)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapTest2</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		Map map = <span class="keyword">new</span> HashMap();</div><div class="line">		<span class="comment">// 成对放入多个key-value对</span></div><div class="line">		map.put(<span class="string">"疯狂Java讲义"</span> , <span class="number">109</span>);</div><div class="line">		map.put(<span class="string">"疯狂iOS讲义"</span> , <span class="number">99</span>);</div><div class="line">		map.put(<span class="string">"疯狂Ajax讲义"</span> , <span class="number">79</span>);</div><div class="line">		<span class="comment">// 尝试替换key为"疯狂XML讲义"的value，由于原Map中没有对应的key，</span></div><div class="line">		<span class="comment">// 因此对Map没有改变，不会添加新的key-value对</span></div><div class="line">		map.replace(<span class="string">"疯狂XML讲义"</span> , <span class="number">66</span>);</div><div class="line">		System.out.println(map);</div><div class="line">		<span class="comment">// 使用原value与参数计算出来的结果覆盖原有的value</span></div><div class="line">		map.merge(<span class="string">"疯狂iOS讲义"</span> , <span class="number">10</span> ,</div><div class="line">			(oldVal , param) -&gt; (Integer)oldVal + (Integer)param);</div><div class="line">		System.out.println(map); <span class="comment">// "疯狂iOS讲义"的value增大了10</span></div><div class="line">		<span class="comment">// 当key为"Java"对应的value为null（或不存在时），使用计算的结果作为新value</span></div><div class="line">		map.computeIfAbsent(<span class="string">"Java"</span> , (key)-&gt;((String)key).length());</div><div class="line">		System.out.println(map); <span class="comment">// map中添加了 Java=4 这组key-value对</span></div><div class="line">		<span class="comment">// 当key为"Java"对应的value存在时，使用计算的结果作为新value</span></div><div class="line">		map.computeIfPresent(<span class="string">"Java"</span>,</div><div class="line">			(key , value) -&gt; (Integer)value * (Integer)value);</div><div class="line">		System.out.println(map); <span class="comment">// map中 Java=4 变成 Java=16</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Java-8改进的HashMap实现类"><a href="#Java-8改进的HashMap实现类" class="headerlink" title="Java 8改进的HashMap实现类"></a>Java 8改进的HashMap实现类</h2><p>Hahsmap可以使用null作为key或value</p>
<p>由于HashMap的key不能重复，所以最多只有一个key为null，可以有多个value为null</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NullInHashMap</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		HashMap hm = <span class="keyword">new</span> HashMap();</div><div class="line">		<span class="comment">// 试图将两个key为null的key-value对放入HashMap中</span></div><div class="line">		hm.put(<span class="keyword">null</span> , <span class="keyword">null</span>);</div><div class="line">		hm.put(<span class="keyword">null</span> , <span class="keyword">null</span>);    <span class="comment">// ①</span></div><div class="line">		<span class="comment">// 将一个value为null的key-value对放入HashMap中</span></div><div class="line">		hm.put(<span class="string">"a"</span> , <span class="keyword">null</span>);    <span class="comment">// ②</span></div><div class="line">		<span class="comment">// 输出Map对象</span></div><div class="line">		System.out.println(hm);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>判断两个key相等的标准是：</p>
<p>两个key通过equals()判断返回true，两个key的hashCode值也相等</p>
<p>如果使用可变对象作为HashMap的key，并且程序修改了作为key的可变对象，则可能出现程序再也无法准确访问到Map中被修改过的key</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMapErrorTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		HashMap ht = <span class="keyword">new</span> HashMap();</div><div class="line">		<span class="comment">// 此处的A类与前一个程序的A类是同一个类</span></div><div class="line">		ht.put(<span class="keyword">new</span> A(<span class="number">60000</span>) , <span class="string">"疯狂Java讲义"</span>);</div><div class="line">		ht.put(<span class="keyword">new</span> A(<span class="number">87563</span>) , <span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		<span class="comment">// 获得Hashtable的key Set集合对应的Iterator迭代器</span></div><div class="line">		Iterator it = ht.keySet().iterator();</div><div class="line">		<span class="comment">// 取出Map中第一个key，并修改它的count值</span></div><div class="line">		A first = (A)it.next();</div><div class="line">		first.count = <span class="number">87563</span>;   <span class="comment">// ①</span></div><div class="line">		<span class="comment">// 输出&#123;A@1560b=疯狂Java讲义, A@1560b=轻量级Java EE企业应用实战&#125;</span></div><div class="line">		System.out.println(ht);</div><div class="line">		<span class="comment">// 只能删除没有被修改过的key所对应的key-value对</span></div><div class="line">		ht.remove(<span class="keyword">new</span> A(<span class="number">87563</span>));</div><div class="line">		System.out.println(ht);</div><div class="line">		<span class="comment">// 无法获取剩下的value，下面两行代码都将输出null。</span></div><div class="line">		System.out.println(ht.get(<span class="keyword">new</span> A(<span class="number">87563</span>)));   <span class="comment">// ② 输出null</span></div><div class="line">		System.out.println(ht.get(<span class="keyword">new</span> A(<span class="number">60000</span>)));   <span class="comment">// ③ 输出null</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="LinkedHashMap实现类"><a href="#LinkedHashMap实现类" class="headerlink" title="LinkedHashMap实现类"></a>LinkedHashMap实现类</h2><p>LinkedHashMap也使用双向链表来维护Key-Value对的次序，该链表负责维护Map的迭代顺序，迭代顺序与key-value对的插入顺序保持一致，所以性能略低于HashMap的性能，但因为以链表来维护内部顺序，所以在迭代访问Map全部元素时将有较好的性能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedHashMapTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		LinkedHashMap scores = <span class="keyword">new</span> LinkedHashMap();</div><div class="line">		scores.put(<span class="string">"语文"</span> , <span class="number">80</span>);</div><div class="line">		scores.put(<span class="string">"英文"</span> , <span class="number">82</span>);</div><div class="line">		scores.put(<span class="string">"数学"</span> , <span class="number">76</span>);</div><div class="line">		<span class="comment">// 调用forEach方法遍历scores里的所有key-value对</span></div><div class="line">		scores.forEach((key, value) -&gt; System.out.println(key + <span class="string">"--&gt;"</span> + value));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="使用Properties读写属性文件"><a href="#使用Properties读写属性文件" class="headerlink" title="使用Properties读写属性文件"></a>使用Properties读写属性文件</h2><p>Properties类在处理属性文件时特别方便，相当于一个ket、value都是String类型的Map:</p>
<ul>
<li>String getProperty(String key)</li>
<li>String getProperty(String key,String defaultValue)</li>
<li>Object setProperty(String key,String value)</li>
<li>void load(InputStream inStream)</li>
<li>void store(OutputStream out,String comments)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PropertiesTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">		<span class="keyword">throws</span> Exception</div><div class="line">	&#123;</div><div class="line">		Properties props = <span class="keyword">new</span> Properties();</div><div class="line">		<span class="comment">// 向Properties中增加属性</span></div><div class="line">		props.setProperty(<span class="string">"username"</span> , <span class="string">"yeeku"</span>);</div><div class="line">		props.setProperty(<span class="string">"password"</span> , <span class="string">"123456"</span>);</div><div class="line">		<span class="comment">// 将Properties中的key-value对保存到a.ini文件中</span></div><div class="line">		props.store(<span class="keyword">new</span> FileOutputStream(<span class="string">"a.ini"</span>)</div><div class="line">			, <span class="string">"comment line"</span>);   <span class="comment">//①</span></div><div class="line">		<span class="comment">// 新建一个Properties对象</span></div><div class="line">		Properties props2 = <span class="keyword">new</span> Properties();</div><div class="line">		<span class="comment">// 向Properties中增加属性</span></div><div class="line">		props2.setProperty(<span class="string">"gender"</span> , <span class="string">"male"</span>);</div><div class="line">		<span class="comment">// 将a.ini文件中的key-value对追加到props2中</span></div><div class="line">		props2.load(<span class="keyword">new</span> FileInputStream(<span class="string">"a.ini"</span>) );   <span class="comment">//②</span></div><div class="line">		System.out.println(props2);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="SortedMap接口和TreeMap实现类"><a href="#SortedMap接口和TreeMap实现类" class="headerlink" title="SortedMap接口和TreeMap实现类"></a>SortedMap接口和TreeMap实现类</h2><p>Map接口派生出SortedMap子接口，SortedMap接口有一个TreeMap实现类</p>
<p>TreeMap就是红黑树数据结构，同样可以自然排序和定制排序</p>
<p>重写compareTo()方法时，应保证两个key通过equals()方法比较返回true时，他们通过compareTo()方法比较应该返回0</p>
<p>TreeMap也提供了一系列根据key顺序访问key-value对的方法：</p>
<ul>
<li>Map.Entry firstEntry()</li>
<li>Object firstKey()</li>
<li>Map.Entry lastEntry()</li>
<li>Object lastKey()</li>
<li>Map.Entry higherEntry(Object key)</li>
<li>Object higherKey(Object key)</li>
<li>Map.Entry lowerEntry(Object key)</li>
<li>Object lowerKey(Object key)</li>
<li>Navigable subMap(Object fromKey,boolean fromInclusive,Object toKey,boolean toInclusive)</li>
<li>SortedMap subMap(Object fromKey,Object toKey)</li>
<li>SortedMap tailMap(Object fromKey)</li>
<li>Navigable tailMap(Object fromKey,boolean inclusive)</li>
<li>SortedMap headMap(Object toKey)</li>
<li>Navigable headMap(Object toKey,boolean inclusive)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">R</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span> count;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">R</span><span class="params">(<span class="keyword">int</span> count)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">this</span>.count = count;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"R[count:"</span> + count + <span class="string">"]"</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 根据count来判断两个对象是否相等。</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (<span class="keyword">this</span> == obj)</div><div class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		<span class="keyword">if</span> (obj != <span class="keyword">null</span>	&amp;&amp; obj.getClass() == R.class)</div><div class="line">		&#123;</div><div class="line">			R r = (R)obj;</div><div class="line">			<span class="keyword">return</span> r.count == <span class="keyword">this</span>.count;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="comment">// 根据count属性值来判断两个对象的大小。</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object obj)</span></span></div><div class="line">	&#123;</div><div class="line">		R r = (R)obj;</div><div class="line">		<span class="keyword">return</span> count &gt; r.count ? <span class="number">1</span> :</div><div class="line">			count &lt; r.count ? -<span class="number">1</span> : <span class="number">0</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMapTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		TreeMap tm = <span class="keyword">new</span> TreeMap();</div><div class="line">		tm.put(<span class="keyword">new</span> R(<span class="number">3</span>) , <span class="string">"轻量级Java EE企业应用实战"</span>);</div><div class="line">		tm.put(<span class="keyword">new</span> R(-<span class="number">5</span>) , <span class="string">"疯狂Java讲义"</span>);</div><div class="line">		tm.put(<span class="keyword">new</span> R(<span class="number">9</span>) , <span class="string">"疯狂Android讲义"</span>);</div><div class="line">		System.out.println(tm);</div><div class="line">		<span class="comment">// 返回该TreeMap的第一个Entry对象</span></div><div class="line">		System.out.println(tm.firstEntry());</div><div class="line">		<span class="comment">// 返回该TreeMap的最后一个key值</span></div><div class="line">		System.out.println(tm.lastKey());</div><div class="line">		<span class="comment">// 返回该TreeMap的比new R(2)大的最小key值。</span></div><div class="line">		System.out.println(tm.higherKey(<span class="keyword">new</span> R(<span class="number">2</span>)));</div><div class="line">		<span class="comment">// 返回该TreeMap的比new R(2)小的最大的key-value对。</span></div><div class="line">		System.out.println(tm.lowerEntry(<span class="keyword">new</span> R(<span class="number">2</span>)));</div><div class="line">		<span class="comment">// 返回该TreeMap的子TreeMap</span></div><div class="line">		System.out.println(tm.subMap(<span class="keyword">new</span> R(-<span class="number">1</span>) , <span class="keyword">new</span> R(<span class="number">4</span>)));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="WeakHashMap实现类"><a href="#WeakHashMap实现类" class="headerlink" title="WeakHashMap实现类"></a>WeakHashMap实现类</h2><p>WeakHashMap的key只保留了对实际对象的弱引用，这意味着如果weakHashMap对象的key所引用的对象没有被其他强引用变量所引用，则这些key所引用的对象可能被垃圾回收，weakHashMap也可能自动删除这些key所对应的key-value对</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeakHashMapTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		WeakHashMap whm = <span class="keyword">new</span> WeakHashMap();</div><div class="line">		<span class="comment">// 将WeakHashMap中添加三个key-value对，</span></div><div class="line">		<span class="comment">// 三个key都是匿名字符串对象（没有其他引用）</span></div><div class="line">		whm.put(<span class="keyword">new</span> String(<span class="string">"语文"</span>) , <span class="keyword">new</span> String(<span class="string">"良好"</span>));</div><div class="line">		whm.put(<span class="keyword">new</span> String(<span class="string">"数学"</span>) , <span class="keyword">new</span> String(<span class="string">"及格"</span>));</div><div class="line">		whm.put(<span class="keyword">new</span> String(<span class="string">"英文"</span>) , <span class="keyword">new</span> String(<span class="string">"中等"</span>));</div><div class="line">		<span class="comment">//将 WeakHashMap中添加一个key-value对，</span></div><div class="line">		<span class="comment">// 该key是一个系统缓存的字符串对象。</span></div><div class="line">		whm.put(<span class="string">"java"</span> , <span class="keyword">new</span> String(<span class="string">"中等"</span>));    <span class="comment">// ①</span></div><div class="line">		<span class="comment">// 输出whm对象，将看到4个key-value对。</span></div><div class="line">		System.out.println(whm);</div><div class="line">		<span class="comment">// 通知系统立即进行垃圾回收</span></div><div class="line">		System.gc();</div><div class="line">		System.runFinalization();</div><div class="line">		<span class="comment">// 通常情况下，将只看到一个key-value对。</span></div><div class="line">		System.out.println(whm);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="IdentityHashMap实现类"><a href="#IdentityHashMap实现类" class="headerlink" title="IdentityHashMap实现类"></a>IdentityHashMap实现类</h2><p>在IdentityHashMap中，当且仅当两个key严格相等（key1 == key2）时，IdentityHashMap才认为两个key相等；对于普通的HashMap，只需要equals()返回true且hashCode值相等即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IdentityHashMapTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		IdentityHashMap ihm = <span class="keyword">new</span> IdentityHashMap();</div><div class="line">		<span class="comment">// 下面两行代码将会向IdentityHashMap对象中添加两个key-value对</span></div><div class="line">		ihm.put(<span class="keyword">new</span> String(<span class="string">"语文"</span>) , <span class="number">89</span>);</div><div class="line">		ihm.put(<span class="keyword">new</span> String(<span class="string">"语文"</span>) , <span class="number">78</span>);</div><div class="line">		<span class="comment">// 下面两行代码只会向IdentityHashMap对象中添加一个key-value对</span></div><div class="line">		ihm.put(<span class="string">"java"</span> , <span class="number">93</span>);</div><div class="line">		ihm.put(<span class="string">"java"</span> , <span class="number">98</span>);</div><div class="line">		System.out.println(ihm);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="EnumMap实现类"><a href="#EnumMap实现类" class="headerlink" title="EnumMap实现类"></a>EnumMap实现类</h2><p>EnumMap有如下特征：</p>
<ul>
<li>EnumMap在内部以数组形式保存，所以这种实现形式非常紧凑、高效</li>
<li>EnumMap根据key的自然顺序(即枚举值在枚举类中的定义顺序)来维护key-value对的顺序</li>
<li>EnumMap不允许null作为key</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">enum</span> Season</div><div class="line">&#123;</div><div class="line">	SPRING,SUMMER,FALL,WINTER</div><div class="line">&#125;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumMapTest</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="comment">// 创建EnumMap对象，该EnumMap的所有key都是Season枚举类的枚举值</span></div><div class="line">		EnumMap enumMap = <span class="keyword">new</span> EnumMap(Season.class);</div><div class="line">		enumMap.put(Season.SUMMER , <span class="string">"夏日炎炎"</span>);</div><div class="line">		enumMap.put(Season.SPRING , <span class="string">"春暖花开"</span>);</div><div class="line">		System.out.println(enumMap);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="各Map实现类的性能分析"><a href="#各Map实现类的性能分析" class="headerlink" title="各Map实现类的性能分析"></a>各Map实现类的性能分析</h2><p>1.HashMap比HashTable要快</p>
<p>2.TreeMap通常比HashMap要慢，但TreeMap中的key-value总是有序状态。当TreeMap被填充后，就可以调用keySet()，取得由key组成的Set，然后使用toArray()方法生成key的数组，接下来使用Arrays的binarySearch()方法在已排序的数组中快速地查询对象</p>
<p>3.对于一般的应用场景，程序应多多考虑使用HashMap</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/17/Java集合框架/" data-id="cj56omtv10009ro2f8pepy3ws" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/集合/">集合</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Hibernate对集合属性的操作" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/17/Hibernate对集合属性的操作/" class="article-date">
  <time datetime="2017-03-17T03:20:41.000Z" itemprop="datePublished">2017-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java框架/">Java框架</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/17/Hibernate对集合属性的操作/">Hibernate对集合属性的操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Hibernate对集合属性的操作"><a href="#Hibernate对集合属性的操作" class="headerlink" title="Hibernate对集合属性的操作"></a>Hibernate对集合属性的操作</h1><blockquote>
<p>Hibernate 框架中提供了很丰富的数据类型，来简化开发人员的困扰。比如在 JavaSE 中提供了Collection、Set、List、Map 等集合，Hibernate 为了也能让这些集合能够通过 ORM 技术和关系型数据库进行关联，Hibernate 中也提供了针对集合属性的关联映射。 </p>
</blockquote>
<hr>
<h2 id="Set集合操作"><a href="#Set集合操作" class="headerlink" title="Set集合操作"></a>Set集合操作</h2><ul>
<li><p>在对应的实体中加入Set集合的成员变量,并加入set/get方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Set&lt;String&gt; hobby;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getHobby</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> hobby;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobby</span><span class="params">(Set&lt;String&gt; hobby)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.hobby = hobby;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置相应的hbm.xml文件</p>
<ul>
<li>在<set></set>中设置</li>
<li>name属性：持久化对象中的set属性的属性名对应</li>
<li>table属性：新建保存该set集合数据的数据表名</li>
<li>key:子元素：在数据库中保存set数据的key/id</li>
<li>element子元素：保存set属性的数据标签，通常都要设置type类型</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">table</span>=<span class="string">"hobby_tab"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">element</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">column</span>=<span class="string">"hobby"</span>&gt;</span><span class="tag">&lt;/<span class="name">element</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="List集合操作"><a href="#List集合操作" class="headerlink" title="List集合操作"></a>List集合操作</h2><ul>
<li><p>在对应的实体中加入List集合的成员变量,并加入set/get方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> List&lt;String&gt; hobby;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getHobby</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> hobby;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobby</span><span class="params">(List&lt;String&gt; hobby)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.hobby = hobby;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置相应的hbm.xml文件</p>
<ul>
<li>在<list></list>标签中设置</li>
<li>name属性：持久化对象中的List属性的属性名对应</li>
<li>table属性：新建保存该集合数据的数据表名</li>
<li>key:子元素：在数据库总保存list数据的key/id</li>
<li>element子元素：保存list属性的数据标签，通常都要设置type类型</li>
<li>list-index:子元素：保存在list的属性保存数据的下标索引</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">list</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">table</span>=<span class="string">"hobby_tab_list"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">   	<span class="tag">&lt;<span class="name">list-index</span> <span class="attr">column</span>=<span class="string">"position"</span>&gt;</span><span class="tag">&lt;/<span class="name">list-index</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">element</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">column</span>=<span class="string">"hobby"</span>&gt;</span><span class="tag">&lt;/<span class="name">element</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="Collection集合操作"><a href="#Collection集合操作" class="headerlink" title="Collection集合操作"></a>Collection集合操作</h2><ul>
<li><p>在对应的实体中加入Collection集合的成员变量,并加入set/get方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Collection&lt;String&gt; hobby;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Collection&lt;String&gt; <span class="title">getHobby</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> hobby;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobby</span><span class="params">(Collection&lt;String&gt; hobby)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.hobby = hobby;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置相应的hbm.xml文件</p>
<ul>
<li>在<bag></bag>标签中配置</li>
<li>name属性：持久化对象中的set属性的属性名对应</li>
<li>table属性：新建保存该set集合数据的数据表名</li>
<li>key:子元素：在数据库总保存set数据的key/id</li>
<li>element子元素：保存set属性的数据标签，通常都要设置type类型</li>
<li>使用<idbag></idbag>标签，还需要设置Collection_id子元素，添加Collection属性表的id</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--若删除Collection中的一个元素，用bag标签，会先将表中的所有Collection</span></div><div class="line">		删除，再添加存在的元素--&gt;</div><div class="line"><span class="comment">&lt;!--&lt;bag name="hobby" table="hobby_tab_c"&gt;</span></div><div class="line">	&lt;key column="student_id"&gt;&lt;/key&gt;</div><div class="line">    &lt;element type="string" column="hobby"&gt;&lt;/element&gt;</div><div class="line">&lt;/bag&gt;--&gt;</div><div class="line">		     </div><div class="line"><span class="tag">&lt;<span class="name">idbag</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">table</span>=<span class="string">"hobby_tab_c"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">collection-id</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">column</span>=<span class="string">"hobby_id"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">generator</span> <span class="attr">class</span>=<span class="string">"uuid"</span>&gt;</span><span class="tag">&lt;/<span class="name">generator</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">collection-id</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">element</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">column</span>=<span class="string">"hobby"</span>&gt;</span><span class="tag">&lt;/<span class="name">element</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">idbag</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h2 id="Map集合操作"><a href="#Map集合操作" class="headerlink" title="Map集合操作"></a>Map集合操作</h2><ul>
<li><p>在对应的实体中加入Map集合的成员变量,并加入set/get方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Map&lt;String,String&gt; hobby;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,String&gt; <span class="title">getHobby</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> hobby;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobby</span><span class="params">(Map&lt;String,String&gt; hobby)</span> </span>&#123;</div><div class="line">	<span class="keyword">this</span>.hobby = hobby;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>配置相应的hbm.xml文件</p>
<ul>
<li>在<map></map>标签中配置</li>
<li>name属性：持久化对象中的set属性的属性名对应</li>
<li>table属性：新建保存该set集合数据的数据表名</li>
<li>key:子元素：在数据库总保存set数据的key/id</li>
<li>element子元素：保存set属性的数据标签，通常都要设置type类型</li>
<li>map-key子元素：map中保存数据的key</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">map</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">table</span>=<span class="string">"stu_map_hobby"</span>&gt;</span>	</div><div class="line">    <span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"student_id"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">   	<span class="tag">&lt;<span class="name">map-key</span> <span class="attr">column</span>=<span class="string">"keycolumn"</span> <span class="attr">type</span>=<span class="string">"string"</span>&gt;</span><span class="tag">&lt;/<span class="name">map-key</span>&gt;</span></div><div class="line">   	<span class="tag">&lt;<span class="name">element</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">column</span>=<span class="string">"hobby"</span>&gt;</span><span class="tag">&lt;/<span class="name">element</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<p>[源码下载]<a href="https://github.com/LoydC/Practice_Java/tree/master/HibernateCollectionPractice" target="_blank" rel="external">https://github.com/LoydC/Practice_Java/tree/master/HibernateCollectionPractice</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/17/Hibernate对集合属性的操作/" data-id="cj56omtuw0005ro2fgn7crcvy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hibernate/">Hibernate</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSH/">SSH</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/集合/">集合</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java注释" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/17/Java注释/" class="article-date">
  <time datetime="2017-03-17T03:14:54.000Z" itemprop="datePublished">2017-03-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java基础/">Java基础</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/17/Java注释/">Java注释</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h1 id="Java注释"><a href="#Java注释" class="headerlink" title="Java注释"></a>Java注释</h1><p>看了《阿里巴巴Java开发手册》，结合自己平时做项目的经历，越发觉得将代码写的规范和清晰是多么的重要。</p>
<p>现在总结一下Java的注释。</p>
<p>为什么要为程序添加注释：</p>
<ul>
<li>永远不要过于相信自己的理解力</li>
<li>可读性第一，效率第二</li>
<li>代码即文档</li>
</ul>
<hr>
<h1 id="单行注释和多行注释"><a href="#单行注释和多行注释" class="headerlink" title="单行注释和多行注释"></a>单行注释和多行注释</h1><p>单行注释：快捷键command + /</p>
<p>多行注释：快捷键command + option + /</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//对数组arr1进行排序</span></div><div class="line">Arrays.parallelSort(arr1);</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line">	Iterator it = books.iterator();</div><div class="line">	it.forEachRemaining(obj -&gt; System.out.println(obj));</div><div class="line">*/</div></pre></td></tr></table></figure>
<hr>
<h1 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h1><blockquote>
<p>Java提供了一种功能非常强大的注释形式: 文档注释.如果编写Java源代码时添加了文档注释, 然后通过JDK提供的javadoc工具就可以直接将代码里的注释提取成一份系统的API文档. </p>
</blockquote>
<p>Iterator源码中的文档注释如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * An iterator over a collection.  &#123;<span class="doctag">@code</span> Iterator&#125; takes the place of</div><div class="line"> * &#123;<span class="doctag">@link</span> Enumeration&#125; in the Java Collections Framework.  Iterators</div><div class="line"> * differ from enumerations in two ways:</div><div class="line"> *</div><div class="line"> * &lt;ul&gt;</div><div class="line"> *      &lt;li&gt; Iterators allow the caller to remove elements from the</div><div class="line"> *           underlying collection during the iteration with well-defined</div><div class="line"> *           semantics.</div><div class="line"> *      &lt;li&gt; Method names have been improved.</div><div class="line"> * &lt;/ul&gt;</div><div class="line"> *</div><div class="line"> * &lt;p&gt;This interface is a member of the</div><div class="line"> * &lt;a href="&#123;<span class="doctag">@docRoot</span>&#125;/../technotes/guides/collections/index.html"&gt;</div><div class="line"> * Java Collections Framework&lt;/a&gt;.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> &lt;E&gt; the type of elements returned by this iterator</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span>  Josh Bloch</div><div class="line"> * <span class="doctag">@see</span> Collection</div><div class="line"> * <span class="doctag">@see</span> ListIterator</div><div class="line"> * <span class="doctag">@see</span> Iterable</div><div class="line"> * <span class="doctag">@since</span> 1.2</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</div><div class="line"> 	...... </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>标签</th>
<th>位置</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>@author</td>
<td>类或者接口</td>
<td>标明开发该Java程序的作者</td>
</tr>
<tr>
<td>@version</td>
<td>类或者接口</td>
<td>指定源文件的版本</td>
</tr>
<tr>
<td>@see</td>
<td>类或者接口，方法或构造器，成员变量</td>
<td>参考转向(相关主题)</td>
</tr>
<tr>
<td>@param</td>
<td>方法或构造器</td>
<td>对方法中某参数的说明</td>
</tr>
<tr>
<td>@return</td>
<td>方法或构造器</td>
<td>对方法返回值的说明</td>
</tr>
<tr>
<td>@exception</td>
<td>方法或构造器</td>
<td>抛出的异常类型</td>
</tr>
<tr>
<td>@throws</td>
<td>方法或构造器</td>
<td>与@exception相同</td>
</tr>
<tr>
<td>@deprecated</td>
<td>类或者接口，方法或构造器，成员变量</td>
<td>不建议使用</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="Annotation"><a href="#Annotation" class="headerlink" title="Annotation"></a>Annotation</h1><blockquote>
<p>从JDK 5开始，Java增加了对元数据的支持，也就是Annotation。Annotation是代码里的特殊标记，这些标记可以在编译、类加载、运行时被读取，并执行相应的处理。</p>
</blockquote>
<h2 id="基本Annotation"><a href="#基本Annotation" class="headerlink" title="基本Annotation"></a>基本Annotation</h2><ul>
<li>@Override 重写</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SaveMoneyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">	<span class="comment">//使用@Override指定下面方法必须重写父类方法</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">		...</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>@Deprecated 已过时</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apple</span></span>&#123;</div><div class="line">	</div><div class="line">	<span class="meta">@Deprecated</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"苹果"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="comment">//使用被@Deprecated标记的方法会报错</span></div><div class="line">      	<span class="keyword">new</span> Apple().info();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>@SuppressWarnings 抑制编译器的警告</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="comment">//取消了unChecked警告</span></div><div class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuppressWarningTest</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		List&lt;String&gt; list = <span class="keyword">new</span> ArrayList();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>@SafeVarags 抑制”堆污染”警告</li>
</ul>
<p>当把一个不带泛型的对象赋给一个带泛型的变量时，往往就会发生堆污染、</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@SafeVarargs</span>  </div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">useVarargs</span><span class="params">(T... args)</span> </span>&#123;  </div><div class="line">    <span class="keyword">return</span> args.length &gt; <span class="number">0</span> ? args[<span class="number">0</span>] : <span class="keyword">null</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>@FunctionalInterface 标记函数式接口</li>
</ul>
<p>Java 8中，只有一个抽象方法的接口（可以包含多个默认方法或多个static方法），该接口就是函数式接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@FunctionalInterface</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FunctionalInterfaceTest</span></span>&#123;</div><div class="line">   <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</div><div class="line">   <span class="function"><span class="keyword">void</span> <span class="title">anotherDisplay</span><span class="params">()</span></span>;<span class="comment">//报错</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="元Annotation"><a href="#元Annotation" class="headerlink" title="元Annotation"></a>元Annotation</h2><blockquote>
<p>JDK除了在java.lang下提供了5个基本的Annotation之外，还在Java.lang.annotation包下提供了6个Meta Annotation，其中有五个都用于修饰其他的Annotation定义。</p>
</blockquote>
<ul>
<li><strong>@Retention</strong> 注解保留策略<ul>
<li>SOURCE:在源文件中有效（即源文件保留）</li>
<li>CLASS:在class文件中有效（即class保留）</li>
<li>RUNTIME:在运行时有效（即运行时保留）</li>
</ul>
</li>
<li><strong>@Target</strong> 注解修饰目标<ul>
<li>CONSTRUCTOR:用于描述构造器</li>
<li>FIELD:用于描述域</li>
<li>LOCAL_VARIABLE:用于描述局部变量</li>
<li>METHOD:用于描述方法</li>
<li>PACKAGE:用于描述包</li>
<li>PARAMETER:用于描述参数</li>
</ul>
</li>
<li><strong>@Documented</strong> 注解文档提取<ul>
<li>Documented是一个标记注解，没有成员</li>
</ul>
</li>
<li><strong>@Inherited</strong> 注解继承声明<ul>
<li>如果一个使用了@Inherited修饰的annotation类型被用于一个class，则这个annotation将被用于该class的子类。</li>
<li>@Inherited annotation类型是被标注过的class的子类所继承。类并不从它所实现的接口继承annotation，方法并不从它所重载的方法继承annotation。</li>
</ul>
</li>
</ul>
<h2 id="自定义Annotation"><a href="#自定义Annotation" class="headerlink" title="自定义Annotation"></a>自定义Annotation</h2><p>定义新的Annotation类型使用@interface关键字</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Inherited</span></div><div class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</div><div class="line"><span class="meta">@Target</span>(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</div><div class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Tag &#123;</div><div class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> "该叫啥才好呢?"</span>;</div><div class="line"></div><div class="line">    <span class="function">String <span class="title">description</span><span class="params">()</span> <span class="keyword">default</span> "这家伙很懒, 啥也没留下..."</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>自定义的Annotation继承了Annotation这个接口, 因此自定义注解中包含了Annotation接口中所有的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Annotation</span> </span>&#123;</div><div class="line">   </div><div class="line">  	<span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    Class&lt;? extends Annotation&gt; annotationType();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="阿里Java开发手册关于注释的内容"><a href="#阿里Java开发手册关于注释的内容" class="headerlink" title="阿里Java开发手册关于注释的内容"></a>阿里Java开发手册关于注释的内容</h1><ul>
<li>【强制】类、类属性、类方法的注释必须使用Javadoc规范，使用/<em>* 内容 </em>/格式，不得使用//xxx方式。</li>
<li>【强制】所有的抽象方法（包括接口中的方法）必须要用Javadoc注释、除了返回值、参数、异常说明外，还必须指出该方法做什么事情，实现什么功能。</li>
<li>【强制】所有的类都必须添加创建者信。</li>
<li>【强制】方法内部单行注释，在被注释上方另起一行，使用//注释。方法内部多行注释使用/<em> </em>/，注意与代码对齐。</li>
<li>【强制】所有的枚举类型字段必须要有注释，说明每个数据项的用途。</li>
<li>【推荐】与其“半吊子”英文来注释，不如用中文注释把问题说清楚。专有名词与关键字保持英文原文即可。</li>
<li>【推荐】代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻辑等的修改。</li>
<li>【参考】注释掉的代码尽量要配合说明，而不是简单的注释掉</li>
<li>【参考】对于</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/03/17/Java注释/" data-id="cj56omtuz0006ro2f2btd1m4o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java基础/">Java基础</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/注释/">注释</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-单例模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/11/单例模式/" class="article-date">
  <time datetime="2016-03-11T01:26:51.000Z" itemprop="datePublished">2016-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/设计模式/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/11/单例模式/">单例模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="单例模式简介"><a href="#单例模式简介" class="headerlink" title="单例模式简介"></a>单例模式简介</h1><blockquote>
<p>保证一个类仅有一个实例，并提供一个访问它的全局访问点</p>
</blockquote>
<h2 id="单例模式结构图"><a href="#单例模式结构图" class="headerlink" title="单例模式结构图"></a>单例模式结构图</h2><p><img src="http://wiki.jikexueyuan.com/project/java-design-pattern/images/singleton-pattern-1.gif" alt="singleton-pattern"></p>
<h2 id="使用场景："><a href="#使用场景：" class="headerlink" title="使用场景："></a>使用场景：</h2><ul>
<li>线程池</li>
<li>缓存</li>
<li>注册表对象</li>
<li>日志对象</li>
<li>Windows任务管理器</li>
<li>打印机对象</li>
</ul>
<h2 id="实现方法："><a href="#实现方法：" class="headerlink" title="实现方法："></a>实现方法：</h2><ul>
<li>私有类的构造器</li>
<li>将类的实例设为一个静态变量</li>
<li>一个静态方法返回这个静态变量</li>
</ul>
<h2 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h2><ul>
<li>可以确保只有一个实例被创建</li>
<li>可以像全局变量一样使用，有可避免一开始就创建好对象</li>
<li>节约系统资源</li>
<li>允许可变数目的实例</li>
<li>避免对共享资源的多重占用</li>
</ul>
<h2 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h2><ul>
<li>不利于扩展</li>
<li>不适用于变化的对象</li>
<li>职责过重，一定程度上违背了“单一职责原则”</li>
</ul>
<h1 id="单例模式实现方法"><a href="#单例模式实现方法" class="headerlink" title="单例模式实现方法"></a>单例模式实现方法</h1><p>单例模式公有五种实现方法：</p>
<ul>
<li>懒汉式</li>
<li>饿汉式</li>
<li>双重检测锁</li>
<li>静态内部类</li>
<li>枚举类</li>
</ul>
<h2 id="懒汉式"><a href="#懒汉式" class="headerlink" title="懒汉式"></a>懒汉式</h2><blockquote>
<p> 单例的懒汉式无须在程序的一开始就创建好对象，可以延迟加载，但是每次getInstance时都需要对其进行synchronized加锁。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span> </span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line">			instance = <span class="keyword">new</span> LazySingleton();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> instance;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="饿汉式"><a href="#饿汉式" class="headerlink" title="饿汉式"></a>饿汉式</h2><blockquote>
<p>单例的饿汉式无须在每次getInstance时都对其进行synchronized加锁，因为其在初始化该类时就初始化其实例，天然的线程安全。但是若这个对象非常消耗资源，而程序在执行过程中又一直没有用到，将会造成浪费。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HungerSingleton</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HungerSingleton instance = <span class="keyword">new</span> HungerSingleton();</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">HungerSingleton</span><span class="params">()</span></span>&#123;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungerSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> instance;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="双重检测锁"><a href="#双重检测锁" class="headerlink" title="双重检测锁"></a>双重检测锁</h2><blockquote>
<p>由于懒汉模式中每次getInstance时都会synchronized加锁，效率低下。其实应该首先检查是否实例已经创建，如果尚未创建，“才”进行同步。这样只有第一次会同步，之后都不会同步了。这就是单例的双重检测锁的思想。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleCheckSingleton</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> DoubleCheckSingleton instance;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">DoubleCheckSingleton</span><span class="params">()</span></span>&#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DoubleCheckSingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line">			<span class="keyword">synchronized</span>(DoubleCheckSingleton.class)&#123;</div><div class="line">				<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</div><div class="line">					instance = <span class="keyword">new</span> DoubleCheckSingleton();</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> instance;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h2><blockquote>
<p>使用静态内部类既可以延迟加载，又线程安全。因为本类没有static修饰，所以加载本类时不会初始化对象。又因为加载类天然的线程安全，所以不需要加锁。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticInnerSingleton</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerClassInstance</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> StaticInnerSingleton instance = <span class="keyword">new</span> StaticInnerSingleton();</div><div class="line">    &#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">StaticInnerSingleton</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> StaticInnerSingleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> InnerClassInstance.instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><blockquote>
<p>上面四种方法面对序列化或反射攻击时，都会创建一个新的实例。</p>
<p>在《Effective Java》中，提及了用枚举类实现单例模式，这种方法更加简洁，并且无场地提供了序列化机制，绝对防止多次实例化。并声称单元素的枚举类已经成为实现Singleton的最佳方法。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> EnumSingleton &#123;</div><div class="line">	INSTANCE;</div><div class="line">	<span class="comment">//下面可以添加其他方法或成员变量</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Enum Singleton"</span>);;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>单例模式的懒汉式饿汉式都有明显的缺点，懒汉式需要反复加锁，饿汉式不能延迟加载。</p>
<p>双重检测锁和静态内部类的方法没有明显有缺点，而采用枚举类的方式实现单例效率最高，最简洁，但同样不能延迟加载。在实际开发中，若这个对象非常消耗资源，而程序在执行过程中又一直没有用到，优先考虑第三和第四种方法。否则推荐采用枚举类方法。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/03/11/单例模式/" data-id="cj56omtv7000fro2f5t5ijfex" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java基础/">Java基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java框架/">Java框架</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/macbook/">macbook</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/">Hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java基础/">Java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macbook/">macbook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快捷键/">快捷键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/查询/">查询</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/注释/">注释</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集合/">集合</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hibernate/" style="font-size: 16.67px;">Hibernate</a> <a href="/tags/Java基础/" style="font-size: 10px;">Java基础</a> <a href="/tags/SSH/" style="font-size: 16.67px;">SSH</a> <a href="/tags/macbook/" style="font-size: 10px;">macbook</a> <a href="/tags/快捷键/" style="font-size: 10px;">快捷键</a> <a href="/tags/排序/" style="font-size: 20px;">排序</a> <a href="/tags/查询/" style="font-size: 10px;">查询</a> <a href="/tags/注释/" style="font-size: 10px;">注释</a> <a href="/tags/算法/" style="font-size: 20px;">算法</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/集合/" style="font-size: 13.33px;">集合</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/10/选择排序/">选择排序</a>
          </li>
        
          <li>
            <a href="/2017/04/10/插入排序/">插入排序</a>
          </li>
        
          <li>
            <a href="/2017/04/10/快速排序/">快速排序</a>
          </li>
        
          <li>
            <a href="/2017/04/10/归并排序/">归并排序</a>
          </li>
        
          <li>
            <a href="/2017/04/10/冒泡排序/">冒泡排序</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>